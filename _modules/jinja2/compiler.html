

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>jinja2.compiler &mdash; Jinja2 API</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Jinja2 API" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Jinja2 API
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../off_doc.intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../off_doc.intro.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../off_doc.intro.html#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.intro.html#as-a-python-egg-via-easy-install">As a Python egg (via <cite>easy_install</cite>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.intro.html#from-the-tarball-release">From the tarball release</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.intro.html#installing-the-development-version">Installing the development version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.intro.html#markupsafe-dependency">MarkupSafe Dependency</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../off_doc.intro.html#basic-api-usage">Basic API Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../off_doc.intro.html#experimental-python-3-support">Experimental Python 3 Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../off_doc.templates.html">Template Designer Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../templ1.html">1. Synopsis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templ2.html">2. Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templ3.html">3. Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templ4.html">4. Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templ5.html">5. Comments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templ6.html">6. Whitespace Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templ7.html">7. Escaping</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templ8.html">8. Line Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templ9.html">9. Template Inheritance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../templ9.html#base-template">9.1. Base Template</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ9.html#child-template">9.2. Child Template</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ9.html#super-blocks">9.3. Super Blocks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ9.html#named-block-end-tags">9.4. Named Block End-Tags</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ9.html#block-nesting-and-scope">9.5. Block Nesting and Scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ9.html#template-objects">9.6. Template Objects</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../templ10.html">10. HTML Escaping</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../templ10.html#working-with-manual-escaping">10.1. Working with Manual Escaping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ10.html#working-with-automatic-escaping">10.2. Working with Automatic Escaping</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../templ11.html">11. List of Control Structures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../templ11.html#for">11.1. For</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ11.html#if">11.2. If</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ11.html#macros">11.3. Macros</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ11.html#call">11.4. Call</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ11.html#filters">11.5. Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ11.html#assignments">11.6. Assignments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ11.html#block-assignments">11.7. Block Assignments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ11.html#extends">11.8. Extends</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ11.html#blocks">11.9. Blocks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ11.html#include">11.10. Include</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ11.html#import">11.11. Import</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../templ12.html">12. Import Context Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templ13.html">13. Expressions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../templ13.html#literals">13.1. Literals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ13.html#math">13.2. Math</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ13.html#comparisons">13.3. Comparisons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ13.html#logic">13.4. Logic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ13.html#other-operators">13.5. Other Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ13.html#if-expression">13.6. If Expression</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../templ14.html">14. List of Builtin Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templ15.html">15. List of Builtin Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templ16.html">16. List of Global Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../templ17.html">17. Extensions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../templ17.html#i18n">17.1. i18n</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ17.html#expression-statement">17.2. Expression Statement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ17.html#loop-controls">17.3. Loop Controls</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../templ17.html#with-statement">17.4. With Statement</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../templ18.html">18. Autoescape Extension</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../off_doc.extensions.html">Extensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../ext1.html">1. Adding Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ext2.html">2. i18n Extension</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ext2.html#environment-methods">2.1. Environment Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ext2.html#newstyle-gettext">2.2. Newstyle Gettext</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ext3.html">3. Expression Statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ext4.html">4. Loop Controls</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ext5.html">5. With Statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ext6.html">6. Autoescape Extension</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../off_doc.html">Others from the official doc</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../off_doc.api.html">1. API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.api.html#basics">1.1. Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.api.html#unicode">1.2. Unicode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.api.html#high-level-api">1.3. High Level API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#environment">1.3.1. <code class="docutils literal"><span class="pre">Environment</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#template">1.3.2. <code class="docutils literal"><span class="pre">Template</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-environment-templatestream">1.3.3. <code class="docutils literal"><span class="pre">jinja2.environment.TemplateStream</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.api.html#autoescaping">1.4. Autoescaping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.api.html#notes-on-identifiers">1.5. Notes on Identifiers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.api.html#undefined-types">1.6. Undefined Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#undefined">1.6.1. <code class="docutils literal"><span class="pre">Undefined</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#debugundefined">1.6.2. <code class="docutils literal"><span class="pre">DebugUndefined</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#strictundefined">1.6.3. <code class="docutils literal"><span class="pre">StrictUndefined</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#make-logging-undefined">1.6.4. <code class="docutils literal"><span class="pre">make_logging_undefined()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.api.html#the-context">1.7. The Context</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-runtime-context">1.7.1. <code class="docutils literal"><span class="pre">jinja2.runtime.Context</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.api.html#loaders">1.8. Loaders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-baseloader">1.8.1. <code class="docutils literal"><span class="pre">jinja2.BaseLoader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-filesystemloader">1.8.2. <code class="docutils literal"><span class="pre">jinja2.FileSystemLoader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-packageloader">1.8.3. <code class="docutils literal"><span class="pre">jinja2.PackageLoader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-dictloader">1.8.4. <code class="docutils literal"><span class="pre">jinja2.DictLoader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-functionloader">1.8.5. <code class="docutils literal"><span class="pre">jinja2.FunctionLoader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-prefixloader">1.8.6. <code class="docutils literal"><span class="pre">jinja2.PrefixLoader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-choiceloader">1.8.7. <code class="docutils literal"><span class="pre">jinja2.ChoiceLoader</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-moduleloader">1.8.8. <code class="docutils literal"><span class="pre">jinja2.ModuleLoader</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.api.html#bytecode-cache">1.9. Bytecode Cache</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-bytecodecache">1.9.1. <code class="docutils literal"><span class="pre">jinja2.BytecodeCache</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-bccache-bucket">1.9.2. <code class="docutils literal"><span class="pre">jinja2.bccache.Bucket</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-filesystembytecodecache">1.9.3. <code class="docutils literal"><span class="pre">jinja2.FileSystemBytecodeCache</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-memcachedbytecodecache">1.9.4. <code class="docutils literal"><span class="pre">jinja2.MemcachedBytecodeCache</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.api.html#utilities">1.10. Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-environmentfilter">1.10.1. <code class="docutils literal"><span class="pre">jinja2.environmentfilter()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-contextfilter">1.10.2. <code class="docutils literal"><span class="pre">jinja2.contextfilter()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-evalcontextfilter">1.10.3. <code class="docutils literal"><span class="pre">jinja2.evalcontextfilter()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-environmentfunction">1.10.4. <code class="docutils literal"><span class="pre">jinja2.environmentfunction()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-contextfunction">1.10.5. <code class="docutils literal"><span class="pre">jinja2.contextfunction()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-evalcontextfunction">1.10.6. <code class="docutils literal"><span class="pre">jinja2.evalcontextfunction()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#escape-s">1.10.7. escape(s)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-clear-caches">1.10.8. <code class="docutils literal"><span class="pre">jinja2.clear_caches()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-is-undefined">1.10.9. <code class="docutils literal"><span class="pre">jinja2.is_undefined()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-markup">1.10.10. <code class="docutils literal"><span class="pre">jinja2.Markup</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.api.html#exceptions">1.11. Exceptions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-templateerror">1.11.1. <code class="docutils literal"><span class="pre">jinja2.TemplateError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-undefinederror">1.11.2. <code class="docutils literal"><span class="pre">jinja2.UndefinedError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-templatenotfound">1.11.3. <code class="docutils literal"><span class="pre">jinja2.TemplateNotFound</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-templatesnotfound">1.11.4. <code class="docutils literal"><span class="pre">jinja2.TemplatesNotFound</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-templatesyntaxerror">1.11.5. <code class="docutils literal"><span class="pre">jinja2.TemplateSyntaxError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-templateassertionerror">1.11.6. <code class="docutils literal"><span class="pre">jinja2.TemplateAssertionError</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.api.html#custom-filters">1.12. Custom Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.api.html#evaluation-context">1.13. Evaluation Context</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.api.html#jinja2-nodes-evalcontext">1.13.1. <code class="docutils literal"><span class="pre">jinja2.nodes.EvalContext</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.api.html#custom-tests">1.14. Custom Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.api.html#the-global-namespace">1.15. The Global Namespace</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.api.html#low-level-api">1.16. Low Level API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.api.html#the-meta-api">1.17. The Meta API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../off_doc.sandbox.html">2. Sandbox</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.sandbox.html#api">2.1. API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.sandbox.html#sandboxedenvironment">2.1.1. <code class="docutils literal"><span class="pre">SandboxedEnvironment</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.sandbox.html#immutablesandboxedenvironment">2.1.2. <code class="docutils literal"><span class="pre">ImmutableSandboxedEnvironment</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.sandbox.html#securityerror">2.1.3. <code class="docutils literal"><span class="pre">SecurityError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.sandbox.html#unsafe">2.1.4. <code class="docutils literal"><span class="pre">unsafe()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.sandbox.html#is-internal-attribute">2.1.5. <code class="docutils literal"><span class="pre">is_internal_attribute()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.sandbox.html#modifies-known-mutable">2.1.6. <code class="docutils literal"><span class="pre">modifies_known_mutable()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.sandbox.html#operator-intercepting">2.2. Operator Intercepting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../off_doc.extensions.writing.html">3. Writing Extensions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.extensions.writing.html#example-extension">3.1. Example Extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.extensions.writing.html#extension-api">3.2. Extension API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.extensions.writing.html#jinja2-ext-extension">3.2.1. <code class="docutils literal"><span class="pre">jinja2.ext.Extension</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.extensions.writing.html#parser-api">3.3. Parser API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.extensions.writing.html#jinja2-parser-parser">3.3.1. <code class="docutils literal"><span class="pre">jinja2.parser.Parser</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.extensions.writing.html#jinja2-lexer-tokenstream">3.3.2. jinja2.lexer.TokenStream</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.extensions.writing.html#jinja2-lexer-token">3.3.3. jinja2.lexer.Token</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.extensions.writing.html#jinja2-lexer-count-newlines">3.3.4. jinja2.lexer.count_newlines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.extensions.writing.html#ast">3.4. AST</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../off_doc.integration.html">4. Integration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.integration.html#babel-integration">4.1. Babel Integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.integration.html#pylons">4.2. Pylons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.integration.html#textmate">4.3. TextMate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.integration.html#vim">4.4. Vim</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../off_doc.switching.html">5. Switching from other Template Engines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.switching.html#jinja1">5.1. Jinja1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.switching.html#api">5.1.1. API</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.switching.html#templates">5.1.2. Templates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.switching.html#django">5.2. Django</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.switching.html#method-calls">5.2.1. Method Calls</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.switching.html#filter-arguments">5.2.2. Filter Arguments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.switching.html#tests">5.2.3. Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.switching.html#loops">5.2.4. Loops</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../off_doc.switching.html#cycle">5.2.5. Cycle</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.switching.html#mako">5.3. Mako</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../off_doc.tricks.html">6. Tips and Tricks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.tricks.html#null-master-fallback">6.1. Null-Master Fallback</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.tricks.html#alternating-rows">6.2. Alternating Rows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.tricks.html#highlighting-active-menu-items">6.3. Highlighting Active Menu Items</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.tricks.html#accessing-the-parent-loop">6.4. Accessing the parent Loop</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../off_doc.faq.html">7. Frequently Asked Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.faq.html#why-is-it-called-jinja">7.1. Why is it called Jinja?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.faq.html#how-fast-is-it">7.2. How fast is it?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.faq.html#how-compatible-is-jinja2-with-django">7.3. How Compatible is Jinja2 with Django?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.faq.html#isn-t-it-a-terrible-idea-to-put-logic-into-templates">7.4. Isn&#8217;t it a terrible idea to put Logic into Templates?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.faq.html#why-is-autoescaping-not-the-default">7.5. Why is Autoescaping not the Default?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.faq.html#why-is-the-context-immutable">7.6. Why is the Context immutable?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.faq.html#my-tracebacks-look-weird-what-s-happening">7.7. My tracebacks look weird.  What&#8217;s happening?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.faq.html#why-is-there-no-python-2-3-2-4-2-5-3-1-3-2-support">7.8. Why is there no Python 2.3/2.4/2.5/3.1/3.2 support?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../off_doc.faq.html#my-macros-are-overridden-by-something">7.9. My Macros are overridden by something</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/jinja2.html">jinja2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.html#nutshell">Nutshell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.html#functions">Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.clear_caches.html">jinja2.clear_caches</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.contextfilter.html">jinja2.contextfilter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.contextfunction.html">jinja2.contextfunction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environmentfilter.html">jinja2.environmentfilter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environmentfunction.html">jinja2.environmentfunction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.escape.html">jinja2.escape</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.evalcontextfilter.html">jinja2.evalcontextfilter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.evalcontextfunction.html">jinja2.evalcontextfunction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.is_undefined.html">jinja2.is_undefined</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.make_logging_undefined.html">jinja2.make_logging_undefined</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.html#classes">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.BaseLoader.html">jinja2.BaseLoader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.BaseLoader.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.BaseLoader.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.BytecodeCache.html">jinja2.BytecodeCache</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.BytecodeCache.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.ChoiceLoader.html">jinja2.ChoiceLoader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ChoiceLoader.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ChoiceLoader.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.DebugUndefined.html">jinja2.DebugUndefined</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.DebugUndefined.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.DictLoader.html">jinja2.DictLoader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.DictLoader.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.DictLoader.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.Environment.html">jinja2.Environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.Environment.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.Environment.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.FileSystemBytecodeCache.html">jinja2.FileSystemBytecodeCache</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.FileSystemBytecodeCache.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.FileSystemLoader.html">jinja2.FileSystemLoader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.FileSystemLoader.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.FileSystemLoader.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.FunctionLoader.html">jinja2.FunctionLoader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.FunctionLoader.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.FunctionLoader.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.Markup.html">jinja2.Markup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.Markup.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.MemcachedBytecodeCache.html">jinja2.MemcachedBytecodeCache</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.MemcachedBytecodeCache.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.ModuleLoader.html">jinja2.ModuleLoader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ModuleLoader.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ModuleLoader.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.PackageLoader.html">jinja2.PackageLoader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.PackageLoader.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.PackageLoader.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.PrefixLoader.html">jinja2.PrefixLoader</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.PrefixLoader.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.PrefixLoader.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.StrictUndefined.html">jinja2.StrictUndefined</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.StrictUndefined.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.Template.html">jinja2.Template</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.Template.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.Template.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.Undefined.html">jinja2.Undefined</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.Undefined.html#methods">Methods</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.html#exceptions">Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.TemplateAssertionError.html">jinja2.TemplateAssertionError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.TemplateError.html">jinja2.TemplateError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.TemplateNotFound.html">jinja2.TemplateNotFound</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.TemplateSyntaxError.html">jinja2.TemplateSyntaxError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.TemplatesNotFound.html">jinja2.TemplatesNotFound</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.UndefinedError.html">jinja2.UndefinedError</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/jinja2.sandbox.html">jinja2.sandbox</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.sandbox.html#functions">Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.sandbox.is_internal_attribute.html">jinja2.sandbox.is_internal_attribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.sandbox.modifies_known_mutable.html">jinja2.sandbox.modifies_known_mutable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.sandbox.safe_range.html">jinja2.sandbox.safe_range</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.sandbox.unsafe.html">jinja2.sandbox.unsafe</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.sandbox.html#classes">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.DictMixin.html">jinja2.sandbox.DictMixin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.DictMixin.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.Environment.html">jinja2.sandbox.Environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.Environment.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.Environment.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.ImmutableSandboxedEnvironment.html">jinja2.sandbox.ImmutableSandboxedEnvironment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.ImmutableSandboxedEnvironment.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.ImmutableSandboxedEnvironment.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.MutableMapping.html">jinja2.sandbox.MutableMapping</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.MutableMapping.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.MutableSequence.html">jinja2.sandbox.MutableSequence</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.MutableSequence.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.MutableSet.html">jinja2.sandbox.MutableSet</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.MutableSet.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.SandboxedEnvironment.html">jinja2.sandbox.SandboxedEnvironment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.SandboxedEnvironment.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.SandboxedEnvironment.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.Set.html">jinja2.sandbox.Set</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.Set.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.UserDict.html">jinja2.sandbox.UserDict</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.UserDict.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.UserList.html">jinja2.sandbox.UserList</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.UserList.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.deque.html">jinja2.sandbox.deque</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.deque.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.sandbox.deque.html#attributes">Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.sandbox.html#exceptions">Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.sandbox.SecurityError.html">jinja2.sandbox.SecurityError</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/jinja2.exceptions.html">jinja2.exceptions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.exceptions.html#functions">Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.exceptions.implements_to_string.html">jinja2.exceptions.implements_to_string</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.exceptions.html#classes">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.exceptions.imap.html">jinja2.exceptions.imap</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.exceptions.imap.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.exceptions.text_type.html">jinja2.exceptions.text_type</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.exceptions.text_type.html#methods">Methods</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.exceptions.html#exceptions">Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.exceptions.FilterArgumentError.html">jinja2.exceptions.FilterArgumentError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.exceptions.SecurityError.html">jinja2.exceptions.SecurityError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.exceptions.TemplateAssertionError.html">jinja2.exceptions.TemplateAssertionError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.exceptions.TemplateError.html">jinja2.exceptions.TemplateError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.exceptions.TemplateNotFound.html">jinja2.exceptions.TemplateNotFound</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.exceptions.TemplateRuntimeError.html">jinja2.exceptions.TemplateRuntimeError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.exceptions.TemplateSyntaxError.html">jinja2.exceptions.TemplateSyntaxError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.exceptions.TemplatesNotFound.html">jinja2.exceptions.TemplatesNotFound</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.exceptions.UndefinedError.html">jinja2.exceptions.UndefinedError</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/jinja2.environment.html">jinja2.environment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.environment.html#functions">Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.concat.html">jinja2.environment.concat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.consume.html">jinja2.environment.consume</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.copy_cache.html">jinja2.environment.copy_cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.create_cache.html">jinja2.environment.create_cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.encode_filename.html">jinja2.environment.encode_filename</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.generate.html">jinja2.environment.generate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.get_lexer.html">jinja2.environment.get_lexer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.get_next.html">jinja2.environment.get_next</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.get_spontaneous_environment.html">jinja2.environment.get_spontaneous_environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.implements_iterator.html">jinja2.environment.implements_iterator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.implements_to_string.html">jinja2.environment.implements_to_string</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.import_string.html">jinja2.environment.import_string</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.internalcode.html">jinja2.environment.internalcode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.iteritems.html">jinja2.environment.iteritems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.load_extensions.html">jinja2.environment.load_extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.new_context.html">jinja2.environment.new_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.optimize.html">jinja2.environment.optimize</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.reduce.html">jinja2.environment.reduce</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.reraise.html">jinja2.environment.reraise</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.environment.html#classes">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.environment.CodeGenerator.html">jinja2.environment.CodeGenerator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.CodeGenerator.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.environment.Context.html">jinja2.environment.Context</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.Context.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.Context.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.environment.Environment.html">jinja2.environment.Environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.Environment.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.Environment.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.environment.EvalContext.html">jinja2.environment.EvalContext</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.EvalContext.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.environment.LRUCache.html">jinja2.environment.LRUCache</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.LRUCache.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.environment.Markup.html">jinja2.environment.Markup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.Markup.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.environment.Parser.html">jinja2.environment.Parser</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.Parser.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.environment.Template.html">jinja2.environment.Template</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.Template.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.Template.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.environment.TemplateExpression.html">jinja2.environment.TemplateExpression</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.TemplateExpression.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.environment.TemplateModule.html">jinja2.environment.TemplateModule</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.TemplateModule.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.environment.TemplateStream.html">jinja2.environment.TemplateStream</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.TemplateStream.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.environment.TokenStream.html">jinja2.environment.TokenStream</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.TokenStream.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.TokenStream.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.environment.Undefined.html">jinja2.environment.Undefined</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.Undefined.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.environment.ifilter.html">jinja2.environment.ifilter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.ifilter.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.environment.imap.html">jinja2.environment.imap</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.imap.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.environment.text_type.html">jinja2.environment.text_type</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.environment.text_type.html#methods">Methods</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.environment.html#exceptions">Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.TemplateNotFound.html">jinja2.environment.TemplateNotFound</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.TemplateRuntimeError.html">jinja2.environment.TemplateRuntimeError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.TemplateSyntaxError.html">jinja2.environment.TemplateSyntaxError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.environment.TemplatesNotFound.html">jinja2.environment.TemplatesNotFound</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/jinja2.runtime.html">jinja2.runtime</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.runtime.html#functions">Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.runtime.concat.html">jinja2.runtime.concat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.runtime.escape.html">jinja2.runtime.escape</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.runtime.identity.html">jinja2.runtime.identity</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.runtime.implements_iterator.html">jinja2.runtime.implements_iterator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.runtime.implements_to_string.html">jinja2.runtime.implements_to_string</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.runtime.internalcode.html">jinja2.runtime.internalcode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.runtime.iteritems.html">jinja2.runtime.iteritems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.runtime.make_logging_undefined.html">jinja2.runtime.make_logging_undefined</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.runtime.markup_join.html">jinja2.runtime.markup_join</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.runtime.new_context.html">jinja2.runtime.new_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.runtime.object_type_repr.html">jinja2.runtime.object_type_repr</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.runtime.soft_unicode.html">jinja2.runtime.soft_unicode</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.runtime.unicode_join.html">jinja2.runtime.unicode_join</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.runtime.html#classes">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.runtime.BlockReference.html">jinja2.runtime.BlockReference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.BlockReference.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.BlockReference.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.runtime.Context.html">jinja2.runtime.Context</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.Context.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.Context.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.runtime.DebugUndefined.html">jinja2.runtime.DebugUndefined</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.DebugUndefined.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.runtime.EvalContext.html">jinja2.runtime.EvalContext</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.EvalContext.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.runtime.LoopContext.html">jinja2.runtime.LoopContext</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.LoopContext.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.LoopContext.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.runtime.LoopContextIterator.html">jinja2.runtime.LoopContextIterator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.LoopContextIterator.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.LoopContextIterator.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.runtime.Macro.html">jinja2.runtime.Macro</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.Macro.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.runtime.Mapping.html">jinja2.runtime.Mapping</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.Mapping.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.runtime.Markup.html">jinja2.runtime.Markup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.Markup.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.runtime.StrictUndefined.html">jinja2.runtime.StrictUndefined</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.StrictUndefined.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.runtime.TemplateReference.html">jinja2.runtime.TemplateReference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.TemplateReference.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.runtime.Undefined.html">jinja2.runtime.Undefined</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.Undefined.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.runtime.chain.html">jinja2.runtime.chain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.chain.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.chain.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.runtime.imap.html">jinja2.runtime.imap</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.imap.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.runtime.text_type.html">jinja2.runtime.text_type</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.text_type.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.runtime.to_string.html">jinja2.runtime.to_string</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.runtime.to_string.html#methods">Methods</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.runtime.html#exceptions">Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.runtime.TemplateNotFound.html">jinja2.runtime.TemplateNotFound</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.runtime.TemplateRuntimeError.html">jinja2.runtime.TemplateRuntimeError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.runtime.UndefinedError.html">jinja2.runtime.UndefinedError</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/jinja2.bccache.html">jinja2.bccache</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.bccache.html#functions">Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.bccache.BytesIO.html">jinja2.bccache.BytesIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.bccache.listdir.html">jinja2.bccache.listdir</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.bccache.marshal_dump.html">jinja2.bccache.marshal_dump</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.bccache.marshal_load.html">jinja2.bccache.marshal_load</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.bccache.open_if_exists.html">jinja2.bccache.open_if_exists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.bccache.sha1.html">jinja2.bccache.sha1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.bccache.html#classes">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.bccache.Bucket.html">jinja2.bccache.Bucket</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.bccache.Bucket.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.bccache.BytecodeCache.html">jinja2.bccache.BytecodeCache</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.bccache.BytecodeCache.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.bccache.FileSystemBytecodeCache.html">jinja2.bccache.FileSystemBytecodeCache</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.bccache.FileSystemBytecodeCache.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.bccache.MemcachedBytecodeCache.html">jinja2.bccache.MemcachedBytecodeCache</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.bccache.MemcachedBytecodeCache.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.bccache.text_type.html">jinja2.bccache.text_type</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.bccache.text_type.html#methods">Methods</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/jinja2.nodes.html">jinja2.nodes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.nodes.html#functions">Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.nodes.get_eval_context.html">jinja2.nodes.get_eval_context</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.nodes.with_metaclass.html">jinja2.nodes.with_metaclass</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.nodes.html#classes">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Add.html">jinja2.nodes.Add</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Add.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Add.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.And.html">jinja2.nodes.And</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.And.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.And.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Assign.html">jinja2.nodes.Assign</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Assign.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Assign.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.AssignBlock.html">jinja2.nodes.AssignBlock</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.AssignBlock.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.AssignBlock.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.BinExpr.html">jinja2.nodes.BinExpr</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.BinExpr.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.BinExpr.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Block.html">jinja2.nodes.Block</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Block.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Block.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Break.html">jinja2.nodes.Break</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Break.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Break.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Call.html">jinja2.nodes.Call</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Call.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Call.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.CallBlock.html">jinja2.nodes.CallBlock</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.CallBlock.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.CallBlock.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Compare.html">jinja2.nodes.Compare</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Compare.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Compare.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Concat.html">jinja2.nodes.Concat</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Concat.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Concat.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.CondExpr.html">jinja2.nodes.CondExpr</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.CondExpr.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.CondExpr.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Const.html">jinja2.nodes.Const</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Const.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Const.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.ContextReference.html">jinja2.nodes.ContextReference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.ContextReference.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.ContextReference.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Continue.html">jinja2.nodes.Continue</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Continue.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Continue.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Dict.html">jinja2.nodes.Dict</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Dict.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Dict.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Div.html">jinja2.nodes.Div</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Div.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Div.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.EnvironmentAttribute.html">jinja2.nodes.EnvironmentAttribute</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.EnvironmentAttribute.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.EnvironmentAttribute.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.EvalContext.html">jinja2.nodes.EvalContext</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.EvalContext.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.EvalContextModifier.html">jinja2.nodes.EvalContextModifier</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.EvalContextModifier.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.EvalContextModifier.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Expr.html">jinja2.nodes.Expr</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Expr.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Expr.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.ExprStmt.html">jinja2.nodes.ExprStmt</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.ExprStmt.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.ExprStmt.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Extends.html">jinja2.nodes.Extends</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Extends.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Extends.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.ExtensionAttribute.html">jinja2.nodes.ExtensionAttribute</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.ExtensionAttribute.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.ExtensionAttribute.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Filter.html">jinja2.nodes.Filter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Filter.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Filter.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.FilterBlock.html">jinja2.nodes.FilterBlock</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.FilterBlock.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.FilterBlock.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.FloorDiv.html">jinja2.nodes.FloorDiv</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.FloorDiv.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.FloorDiv.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.For.html">jinja2.nodes.For</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.For.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.For.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.FromImport.html">jinja2.nodes.FromImport</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.FromImport.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.FromImport.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Getattr.html">jinja2.nodes.Getattr</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Getattr.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Getattr.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Getitem.html">jinja2.nodes.Getitem</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Getitem.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Getitem.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Helper.html">jinja2.nodes.Helper</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Helper.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Helper.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.If.html">jinja2.nodes.If</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.If.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.If.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Import.html">jinja2.nodes.Import</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Import.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Import.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.ImportedName.html">jinja2.nodes.ImportedName</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.ImportedName.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.ImportedName.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Include.html">jinja2.nodes.Include</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Include.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Include.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.InternalName.html">jinja2.nodes.InternalName</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.InternalName.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.InternalName.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Keyword.html">jinja2.nodes.Keyword</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Keyword.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Keyword.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.List.html">jinja2.nodes.List</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.List.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.List.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Literal.html">jinja2.nodes.Literal</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Literal.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Literal.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Macro.html">jinja2.nodes.Macro</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Macro.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Macro.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.MarkSafe.html">jinja2.nodes.MarkSafe</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.MarkSafe.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.MarkSafe.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.MarkSafeIfAutoescape.html">jinja2.nodes.MarkSafeIfAutoescape</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.MarkSafeIfAutoescape.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.MarkSafeIfAutoescape.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Markup.html">jinja2.nodes.Markup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Markup.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Mod.html">jinja2.nodes.Mod</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Mod.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Mod.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Mul.html">jinja2.nodes.Mul</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Mul.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Mul.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Name.html">jinja2.nodes.Name</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Name.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Name.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Neg.html">jinja2.nodes.Neg</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Neg.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Neg.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Node.html">jinja2.nodes.Node</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Node.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Node.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.NodeType.html">jinja2.nodes.NodeType</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.NodeType.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Not.html">jinja2.nodes.Not</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Not.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Not.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Operand.html">jinja2.nodes.Operand</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Operand.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Operand.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Or.html">jinja2.nodes.Or</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Or.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Or.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Output.html">jinja2.nodes.Output</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Output.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Output.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Pair.html">jinja2.nodes.Pair</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Pair.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Pair.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Pos.html">jinja2.nodes.Pos</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Pos.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Pos.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Pow.html">jinja2.nodes.Pow</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Pow.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Pow.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Scope.html">jinja2.nodes.Scope</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Scope.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Scope.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.ScopedEvalContextModifier.html">jinja2.nodes.ScopedEvalContextModifier</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.ScopedEvalContextModifier.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.ScopedEvalContextModifier.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Slice.html">jinja2.nodes.Slice</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Slice.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Slice.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Stmt.html">jinja2.nodes.Stmt</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Stmt.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Stmt.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Sub.html">jinja2.nodes.Sub</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Sub.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Sub.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Template.html">jinja2.nodes.Template</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Template.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Template.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.TemplateData.html">jinja2.nodes.TemplateData</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.TemplateData.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.TemplateData.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Test.html">jinja2.nodes.Test</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Test.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Test.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Tuple.html">jinja2.nodes.Tuple</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Tuple.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.Tuple.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.UnaryExpr.html">jinja2.nodes.UnaryExpr</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.UnaryExpr.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.UnaryExpr.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.deque.html">jinja2.nodes.deque</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.deque.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.deque.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.izip.html">jinja2.nodes.izip</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.izip.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.nodes.text_type.html">jinja2.nodes.text_type</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.nodes.text_type.html#methods">Methods</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.nodes.html#exceptions">Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.nodes.Impossible.html">jinja2.nodes.Impossible</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/jinja2.ext.html">jinja2.ext</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.ext.html#functions">Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.ext.babel_extract.html">jinja2.ext.babel_extract</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.ext.concat.html">jinja2.ext.concat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.ext.contextfunction.html">jinja2.ext.contextfunction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.ext.extract_from_ast.html">jinja2.ext.extract_from_ast</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.ext.import_string.html">jinja2.ext.import_string</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.ext.iteritems.html">jinja2.ext.iteritems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.ext.with_metaclass.html">jinja2.ext.with_metaclass</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.ext.html#classes">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.ext.AutoEscapeExtension.html">jinja2.ext.AutoEscapeExtension</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.AutoEscapeExtension.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.AutoEscapeExtension.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.ext.Environment.html">jinja2.ext.Environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.Environment.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.Environment.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.ext.ExprStmtExtension.html">jinja2.ext.ExprStmtExtension</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.ExprStmtExtension.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.ExprStmtExtension.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.ext.Extension.html">jinja2.ext.Extension</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.Extension.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.Extension.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.ext.ExtensionRegistry.html">jinja2.ext.ExtensionRegistry</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.ExtensionRegistry.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.ext.InternationalizationExtension.html">jinja2.ext.InternationalizationExtension</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.InternationalizationExtension.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.InternationalizationExtension.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.ext.LoopControlExtension.html">jinja2.ext.LoopControlExtension</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.LoopControlExtension.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.LoopControlExtension.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.ext.Markup.html">jinja2.ext.Markup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.Markup.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.ext.WithExtension.html">jinja2.ext.WithExtension</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.WithExtension.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.WithExtension.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.ext.autoescape.html">jinja2.ext.autoescape</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.autoescape.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.autoescape.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.ext.do.html">jinja2.ext.do</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.do.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.do.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.ext.i18n.html">jinja2.ext.i18n</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.i18n.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.i18n.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.ext.loopcontrols.html">jinja2.ext.loopcontrols</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.loopcontrols.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.loopcontrols.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.ext.with_.html">jinja2.ext.with</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.with_.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.ext.with_.html#attributes">Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.ext.html#exceptions">Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.ext.TemplateAssertionError.html">jinja2.ext.TemplateAssertionError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.ext.TemplateSyntaxError.html">jinja2.ext.TemplateSyntaxError</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/jinja2.lexer.html">jinja2.lexer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.lexer.html#functions">Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.lexer.compile_rules.html">jinja2.lexer.compile_rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.lexer.count_newlines.html">jinja2.lexer.count_newlines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.lexer.describe_token.html">jinja2.lexer.describe_token</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.lexer.describe_token_expr.html">jinja2.lexer.describe_token_expr</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.lexer.get_lexer.html">jinja2.lexer.get_lexer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.lexer.implements_iterator.html">jinja2.lexer.implements_iterator</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.lexer.intern.html">jinja2.lexer.intern</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.lexer.iteritems.html">jinja2.lexer.iteritems</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.lexer.html#classes">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.lexer.Failure.html">jinja2.lexer.Failure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.lexer.Failure.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.lexer.LRUCache.html">jinja2.lexer.LRUCache</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.lexer.LRUCache.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.lexer.Lexer.html">jinja2.lexer.Lexer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.lexer.Lexer.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.lexer.Token.html">jinja2.lexer.Token</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.lexer.Token.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.lexer.Token.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.lexer.TokenStream.html">jinja2.lexer.TokenStream</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.lexer.TokenStream.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.lexer.TokenStream.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.lexer.TokenStreamIterator.html">jinja2.lexer.TokenStreamIterator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.lexer.TokenStreamIterator.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.lexer.deque.html">jinja2.lexer.deque</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.lexer.deque.html#methods">Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.lexer.deque.html#attributes">Attributes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.lexer.itemgetter.html">jinja2.lexer.itemgetter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.lexer.text_type.html">jinja2.lexer.text_type</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.lexer.text_type.html#methods">Methods</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.lexer.html#exceptions">Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.lexer.TemplateSyntaxError.html">jinja2.lexer.TemplateSyntaxError</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../generated/jinja2.parser.html">jinja2.parser</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.parser.html#functions">Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.parser.describe_token.html">jinja2.parser.describe_token</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.parser.describe_token_expr.html">jinja2.parser.describe_token_expr</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.parser.html#classes">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.parser.Parser.html">jinja2.parser.Parser</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.parser.Parser.html#methods">Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/generated/jinja2.parser.imap.html">jinja2.parser.imap</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../generated/generated/jinja2.parser.imap.html#attributes">Attributes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/jinja2.parser.html#exceptions">Exceptions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.parser.TemplateAssertionError.html">jinja2.parser.TemplateAssertionError</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/jinja2.parser.TemplateSyntaxError.html">jinja2.parser.TemplateSyntaxError</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Jinja2 API</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>jinja2.compiler</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for jinja2.compiler</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    jinja2.compiler</span>
<span class="sd">    ~~~~~~~~~~~~~~~</span>

<span class="sd">    Compiles nodes into python code.</span>

<span class="sd">    :copyright: (c) 2010 by the Jinja Team.</span>
<span class="sd">    :license: BSD, see LICENSE for more details.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">chain</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
<span class="kn">from</span> <span class="nn">keyword</span> <span class="kn">import</span> <span class="n">iskeyword</span> <span class="k">as</span> <span class="n">is_python_keyword</span>
<span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">nodes</span>
<span class="kn">from</span> <span class="nn">jinja2.nodes</span> <span class="kn">import</span> <span class="n">EvalContext</span>
<span class="kn">from</span> <span class="nn">jinja2.visitor</span> <span class="kn">import</span> <span class="n">NodeVisitor</span>
<span class="kn">from</span> <span class="nn">jinja2.exceptions</span> <span class="kn">import</span> <span class="n">TemplateAssertionError</span>
<span class="kn">from</span> <span class="nn">jinja2.utils</span> <span class="kn">import</span> <span class="n">Markup</span><span class="p">,</span> <span class="n">concat</span><span class="p">,</span> <span class="n">escape</span>
<span class="kn">from</span> <span class="nn">jinja2._compat</span> <span class="kn">import</span> <span class="n">range_type</span><span class="p">,</span> <span class="n">text_type</span><span class="p">,</span> <span class="n">string_types</span><span class="p">,</span> \
     <span class="n">iteritems</span><span class="p">,</span> <span class="n">NativeStringIO</span><span class="p">,</span> <span class="n">imap</span>


<span class="n">operators</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;eq&#39;</span><span class="p">:</span>       <span class="s1">&#39;==&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ne&#39;</span><span class="p">:</span>       <span class="s1">&#39;!=&#39;</span><span class="p">,</span>
    <span class="s1">&#39;gt&#39;</span><span class="p">:</span>       <span class="s1">&#39;&gt;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;gteq&#39;</span><span class="p">:</span>     <span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span>
    <span class="s1">&#39;lt&#39;</span><span class="p">:</span>       <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;lteq&#39;</span><span class="p">:</span>     <span class="s1">&#39;&lt;=&#39;</span><span class="p">,</span>
    <span class="s1">&#39;in&#39;</span><span class="p">:</span>       <span class="s1">&#39;in&#39;</span><span class="p">,</span>
    <span class="s1">&#39;notin&#39;</span><span class="p">:</span>    <span class="s1">&#39;not in&#39;</span>
<span class="p">}</span>

<span class="c1"># what method to iterate over items do we want to use for dict iteration</span>
<span class="c1"># in generated code?  on 2.x let&#39;s go with iteritems, on 3.x with items</span>
<span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="nb">dict</span><span class="p">,</span> <span class="s1">&#39;iteritems&#39;</span><span class="p">):</span>
    <span class="n">dict_item_iter</span> <span class="o">=</span> <span class="s1">&#39;iteritems&#39;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">dict_item_iter</span> <span class="o">=</span> <span class="s1">&#39;items&#39;</span>


<span class="c1"># does if 0: dummy(x) get us x into the scope?</span>
<span class="k">def</span> <span class="nf">unoptimize_before_dead_code</span><span class="p">():</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">42</span>
    <span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
        <span class="k">if</span> <span class="mi">0</span><span class="p">:</span> <span class="n">dummy</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">f</span>

<span class="c1"># The getattr is necessary for pypy which does not set this attribute if</span>
<span class="c1"># no closure is on the function</span>
<span class="n">unoptimize_before_dead_code</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span>
    <span class="nb">getattr</span><span class="p">(</span><span class="n">unoptimize_before_dead_code</span><span class="p">(),</span> <span class="s1">&#39;__closure__&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>


<div class="viewcode-block" id="generate"><a class="viewcode-back" href="../../generated/jinja2.environment.generate.html#jinja2.environment.generate">[docs]</a><span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">environment</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">defer_init</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generate the python source for a node tree.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Template</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Can</span><span class="se">\&#39;</span><span class="s1">t compile non template nodes&#39;</span><span class="p">)</span>
    <span class="n">generator</span> <span class="o">=</span> <span class="n">environment</span><span class="o">.</span><span class="n">code_generator_class</span><span class="p">(</span><span class="n">environment</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span>
                                                 <span class="n">stream</span><span class="p">,</span> <span class="n">defer_init</span><span class="p">)</span>
    <span class="n">generator</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">stream</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">generator</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span></div>


<span class="k">def</span> <span class="nf">has_safe_repr</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Does the node have a safe representation?&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">NotImplemented</span> <span class="ow">or</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">Ellipsis</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">complex</span><span class="p">,</span> <span class="n">range_type</span><span class="p">,</span>
            <span class="n">Markup</span><span class="p">)</span> <span class="o">+</span> <span class="n">string_types</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="nb">set</span><span class="p">,</span> <span class="nb">frozenset</span><span class="p">)):</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">has_safe_repr</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">iteritems</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">has_safe_repr</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">False</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">has_safe_repr</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>


<span class="k">def</span> <span class="nf">find_undeclared</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if the names passed are accessed undeclared.  The return value</span>
<span class="sd">    is a set of all the undeclared names from the sequence of names found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">visitor</span> <span class="o">=</span> <span class="n">UndeclaredNameVisitor</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
            <span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">VisitorExit</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">return</span> <span class="n">visitor</span><span class="o">.</span><span class="n">undeclared</span>


<span class="k">class</span> <span class="nc">Identifiers</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Tracks the status of identifiers in frames.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># variables that are known to be declared (probably from outer</span>
        <span class="c1"># frames or because they are special for the frame)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">declared</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="c1"># undeclared variables from outer scopes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outer_undeclared</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="c1"># names that are accessed without being explicitly declared by</span>
        <span class="c1"># this one or any of the outer scopes.  Names can appear both in</span>
        <span class="c1"># declared and undeclared.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">undeclared</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="c1"># names that are declared locally</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">declared_locally</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="c1"># names that are declared by parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">declared_parameter</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">add_special</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Register a special name like `loop`.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">undeclared</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">declared</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_declared</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if a name is declared in this or an outer scope.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">declared_locally</span> <span class="ow">or</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">declared_parameter</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">declared</span>

    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Frame</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Holds compile time information for us.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eval_ctx</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eval_ctx</span> <span class="o">=</span> <span class="n">eval_ctx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span> <span class="o">=</span> <span class="n">Identifiers</span><span class="p">()</span>

        <span class="c1"># a toplevel frame is the root + soft frames such as if conditions.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toplevel</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="c1"># the root frame is basically just the outermost frame, so no if</span>
        <span class="c1"># conditions.  This information is used to optimize inheritance</span>
        <span class="c1"># situations.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rootlevel</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="c1"># in some dynamic inheritance situations the compiler needs to add</span>
        <span class="c1"># write tests around output statements.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">require_output_check</span> <span class="o">=</span> <span class="n">parent</span> <span class="ow">and</span> <span class="n">parent</span><span class="o">.</span><span class="n">require_output_check</span>

        <span class="c1"># inside some tags we are using a buffer rather than yield statements.</span>
        <span class="c1"># this for example affects {% filter %} or {% macro %}.  If a frame</span>
        <span class="c1"># is buffered this variable points to the name of the list used as</span>
        <span class="c1"># buffer.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c1"># the name of the block we&#39;re in, otherwise None.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">parent</span> <span class="ow">and</span> <span class="n">parent</span><span class="o">.</span><span class="n">block</span> <span class="ow">or</span> <span class="bp">None</span>

        <span class="c1"># a set of actually assigned names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assigned_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

        <span class="c1"># the parent of this frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>

        <span class="k">if</span> <span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="n">parent</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared</span> <span class="o">|</span>
                <span class="n">parent</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared_parameter</span> <span class="o">|</span>
                <span class="n">parent</span><span class="o">.</span><span class="n">assigned_names</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">outer_undeclared</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="n">parent</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">undeclared</span> <span class="o">-</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">buffer</span>

    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a copy of the current one.&quot;&quot;&quot;</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">)</span>
        <span class="n">rv</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)</span>
        <span class="n">rv</span><span class="o">.</span><span class="n">identifiers</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">__class__</span><span class="p">)</span>
        <span class="n">rv</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rv</span>

    <span class="k">def</span> <span class="nf">inspect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Walk the node and check for identifiers.  If the scope is hard (eg:</span>
<span class="sd">        enforce on a python level) overrides from outer scopes are tracked</span>
<span class="sd">        differently.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">visitor</span> <span class="o">=</span> <span class="n">FrameIdentifierVisitor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
            <span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">find_shadowed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="p">()):</span>
        <span class="sd">&quot;&quot;&quot;Find all the shadowed names.  extra is an iterable of variables</span>
<span class="sd">        that may be defined with `add_special` which may occour scoped.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">declared</span> <span class="o">|</span> <span class="n">i</span><span class="o">.</span><span class="n">outer_undeclared</span><span class="p">)</span> <span class="o">&amp;</span> \
               <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">declared_locally</span> <span class="o">|</span> <span class="n">i</span><span class="o">.</span><span class="n">declared_parameter</span><span class="p">)</span> <span class="o">|</span> \
               <span class="nb">set</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">extra</span> <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">is_declared</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an inner frame.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eval_ctx</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">soft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a soft frame.  A soft frame may not be modified as</span>
<span class="sd">        standalone thing as it shares the resources with the frame it</span>
<span class="sd">        was created of, but it&#39;s not a rootlevel frame any longer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">rv</span><span class="o">.</span><span class="n">rootlevel</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="n">rv</span>

    <span class="n">__copy__</span> <span class="o">=</span> <span class="n">copy</span>


<span class="k">class</span> <span class="nc">VisitorExit</span><span class="p">(</span><span class="ne">RuntimeError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Exception used by the `UndeclaredNameVisitor` to signal a stop.&quot;&quot;&quot;</span>


<span class="k">class</span> <span class="nc">DependencyFinderVisitor</span><span class="p">(</span><span class="n">NodeVisitor</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A visitor that collects filter and test calls.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filters</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tests</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">visit_Filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generic_visit</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">visit_Test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generic_visit</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tests</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">visit_Block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Stop visiting at blocks.&quot;&quot;&quot;</span>


<span class="k">class</span> <span class="nc">UndeclaredNameVisitor</span><span class="p">(</span><span class="n">NodeVisitor</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A visitor that checks if a name is accessed without being</span>
<span class="sd">    declared.  This is different from the frame visitor as it will</span>
<span class="sd">    not stop at closure frames.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">undeclared</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">visit_Name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">ctx</span> <span class="o">==</span> <span class="s1">&#39;load&#39;</span> <span class="ow">and</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">undeclared</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">undeclared</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">VisitorExit</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">visit_Block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Stop visiting a blocks.&quot;&quot;&quot;</span>


<span class="k">class</span> <span class="nc">FrameIdentifierVisitor</span><span class="p">(</span><span class="n">NodeVisitor</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A visitor for `Frame.inspect`.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifiers</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span> <span class="o">=</span> <span class="n">identifiers</span>

    <span class="k">def</span> <span class="nf">visit_Name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;All assignments to names go through this function.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">ctx</span> <span class="o">==</span> <span class="s1">&#39;store&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared_locally</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">ctx</span> <span class="o">==</span> <span class="s1">&#39;param&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared_parameter</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">ctx</span> <span class="o">==</span> <span class="s1">&#39;load&#39;</span> <span class="ow">and</span> <span class="ow">not</span> \
             <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">is_declared</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">undeclared</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">visit_If</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">test</span><span class="p">)</span>
        <span class="n">real_identifiers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span>

        <span class="n">old_names</span> <span class="o">=</span> <span class="n">real_identifiers</span><span class="o">.</span><span class="n">declared_locally</span> <span class="o">|</span> \
                    <span class="n">real_identifiers</span><span class="o">.</span><span class="n">declared_parameter</span>

        <span class="k">def</span> <span class="nf">inner_visit</span><span class="p">(</span><span class="n">nodes</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">nodes</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">set</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span> <span class="o">=</span> <span class="n">real_identifiers</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">subnode</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">subnode</span><span class="p">)</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared_locally</span> <span class="o">-</span> <span class="n">old_names</span>
            <span class="c1"># we have to remember the undeclared variables of this branch</span>
            <span class="c1"># because we will have to pull them.</span>
            <span class="n">real_identifiers</span><span class="o">.</span><span class="n">undeclared</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">undeclared</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span> <span class="o">=</span> <span class="n">real_identifiers</span>
            <span class="k">return</span> <span class="n">rv</span>

        <span class="n">body</span> <span class="o">=</span> <span class="n">inner_visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
        <span class="n">else_</span> <span class="o">=</span> <span class="n">inner_visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">else_</span> <span class="ow">or</span> <span class="p">())</span>

        <span class="c1"># the differences between the two branches are also pulled as</span>
        <span class="c1"># undeclared variables</span>
        <span class="n">real_identifiers</span><span class="o">.</span><span class="n">undeclared</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">body</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">else_</span><span class="p">)</span> <span class="o">-</span>
                                           <span class="n">real_identifiers</span><span class="o">.</span><span class="n">declared</span><span class="p">)</span>

        <span class="c1"># remember those that are declared.</span>
        <span class="n">real_identifiers</span><span class="o">.</span><span class="n">declared_locally</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">body</span> <span class="o">|</span> <span class="n">else_</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">visit_Macro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared_locally</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">visit_Import</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generic_visit</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared_locally</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">target</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">visit_FromImport</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generic_visit</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">names</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared_locally</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared_locally</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">visit_Assign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Visit assignments in the correct order.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">target</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">visit_For</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Visiting stops at for blocks.  However the block sequence</span>
<span class="sd">        is visited as part of the outer scope.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">iter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">visit_CallBlock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">call</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">visit_FilterBlock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">filter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">visit_AssignBlock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Stop visiting at block assigns.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">visit_Scope</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Stop visiting at scopes.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">visit_Block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Stop visiting at blocks.&quot;&quot;&quot;</span>


<span class="k">class</span> <span class="nc">CompilerExit</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Raised if the compiler encountered a situation where it just</span>
<span class="sd">    doesn&#39;t make sense to further process the code.  Any block that</span>
<span class="sd">    raises such an exception is not further processed.</span>
<span class="sd">    &quot;&quot;&quot;</span>


<div class="viewcode-block" id="CodeGenerator"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.html#jinja2.environment.CodeGenerator">[docs]</a><span class="k">class</span> <span class="nc">CodeGenerator</span><span class="p">(</span><span class="n">NodeVisitor</span><span class="p">):</span>

<div class="viewcode-block" id="CodeGenerator.__init__"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.__init__.html#jinja2.environment.CodeGenerator.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">environment</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">defer_init</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">stream</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">stream</span> <span class="o">=</span> <span class="n">NativeStringIO</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">environment</span> <span class="o">=</span> <span class="n">environment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span> <span class="o">=</span> <span class="n">stream</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">created_block_context</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defer_init</span> <span class="o">=</span> <span class="n">defer_init</span>

        <span class="c1"># aliases for imports</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">import_aliases</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># a registry for all blocks.  Because blocks are moved out</span>
        <span class="c1"># into the global python scope they are registered here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># the number of extends statements so far</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extends_so_far</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># some templates have a rootlevel extends.  In this case we</span>
        <span class="c1"># can safely assume that we&#39;re a child template and do some</span>
        <span class="c1"># more optimizations.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">has_known_extends</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="c1"># the current line number</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code_lineno</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="c1"># registry of all filters and tests (global, not block local)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tests</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># the debug information</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug_info</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_write_debug_info</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c1"># the number of new lines before the next write()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_new_lines</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># the line number of the last written statement</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last_line</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># true if nothing was written so far.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_first_write</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="c1"># used by the `temporary_identifier` method to get new</span>
        <span class="c1"># unique, temporary identifier</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last_identifier</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># the current indentation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indentation</span> <span class="o">=</span> <span class="mi">0</span></div>

    <span class="c1"># -- Various compilation helpers</span>

<div class="viewcode-block" id="CodeGenerator.fail"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.fail.html#jinja2.environment.CodeGenerator.fail">[docs]</a>    <span class="k">def</span> <span class="nf">fail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">lineno</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Fail with a :exc:`TemplateAssertionError`.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="n">TemplateAssertionError</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">lineno</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.temporary_identifier"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.temporary_identifier.html#jinja2.environment.CodeGenerator.temporary_identifier">[docs]</a>    <span class="k">def</span> <span class="nf">temporary_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a new unique identifier.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last_identifier</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="s1">&#39;t_</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_identifier</span></div>

<div class="viewcode-block" id="CodeGenerator.buffer"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.buffer.html#jinja2.environment.CodeGenerator.buffer">[docs]</a>    <span class="k">def</span> <span class="nf">buffer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enable buffering for the frame from that point onwards.&quot;&quot;&quot;</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">temporary_identifier</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> = []&#39;</span> <span class="o">%</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.return_buffer_contents"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.return_buffer_contents.html#jinja2.environment.CodeGenerator.return_buffer_contents">[docs]</a>    <span class="k">def</span> <span class="nf">return_buffer_contents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the buffer contents of the frame.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="o">.</span><span class="n">volatile</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;if context.eval_ctx.autoescape:&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;return Markup(concat(</span><span class="si">%s</span><span class="s1">))&#39;</span> <span class="o">%</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;else:&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;return concat(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="o">.</span><span class="n">autoescape</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;return Markup(concat(</span><span class="si">%s</span><span class="s1">))&#39;</span> <span class="o">%</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;return concat(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.indent"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.indent.html#jinja2.environment.CodeGenerator.indent">[docs]</a>    <span class="k">def</span> <span class="nf">indent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Indent by one.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indentation</span> <span class="o">+=</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="CodeGenerator.outdent"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.outdent.html#jinja2.environment.CodeGenerator.outdent">[docs]</a>    <span class="k">def</span> <span class="nf">outdent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Outdent by step.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_indentation</span> <span class="o">-=</span> <span class="n">step</span></div>

<div class="viewcode-block" id="CodeGenerator.start_write"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.start_write.html#jinja2.environment.CodeGenerator.start_write">[docs]</a>    <span class="k">def</span> <span class="nf">start_write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">node</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Yield or write into the frame buffer.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;yield &#39;</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.append(&#39;</span> <span class="o">%</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.end_write"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.end_write.html#jinja2.environment.CodeGenerator.end_write">[docs]</a>    <span class="k">def</span> <span class="nf">end_write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;End the writing process started by `start_write`.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.simple_write"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.simple_write.html#jinja2.environment.CodeGenerator.simple_write">[docs]</a>    <span class="k">def</span> <span class="nf">simple_write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">node</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Simple shortcut for start_write + write + end_write.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_write</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_write</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.blockvisit"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.blockvisit.html#jinja2.environment.CodeGenerator.blockvisit">[docs]</a>    <span class="k">def</span> <span class="nf">blockvisit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodes</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Visit a list of nodes as block in a frame.  If the current frame</span>
<span class="sd">        is no buffer a dummy ``if 0: yield None`` is written automatically</span>
<span class="sd">        unless the force_generator parameter is set to False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;if 0: yield None&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">CompilerExit</span><span class="p">:</span>
            <span class="k">pass</span></div>

<div class="viewcode-block" id="CodeGenerator.write"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.write.html#jinja2.environment.CodeGenerator.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Write a string into the output stream.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_lines</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_first_write</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_lines</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">code_lineno</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_new_lines</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_write_debug_info</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">debug_info</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_write_debug_info</span><span class="p">,</span>
                                            <span class="bp">self</span><span class="o">.</span><span class="n">code_lineno</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_write_debug_info</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_first_write</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;    &#39;</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indentation</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_new_lines</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.writeline"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.writeline.html#jinja2.environment.CodeGenerator.writeline">[docs]</a>    <span class="k">def</span> <span class="nf">writeline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">node</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Combination of newline and write.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newline</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">extra</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.newline"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.newline.html#jinja2.environment.CodeGenerator.newline">[docs]</a>    <span class="k">def</span> <span class="nf">newline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add one or more newlines before the next write.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_new_lines</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_new_lines</span><span class="p">,</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">extra</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">node</span><span class="o">.</span><span class="n">lineno</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_line</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_debug_info</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">lineno</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_last_line</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">lineno</span></div>

<div class="viewcode-block" id="CodeGenerator.signature"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.signature.html#jinja2.environment.CodeGenerator.signature">[docs]</a>    <span class="k">def</span> <span class="nf">signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">extra_kwargs</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Writes a function call to the stream for the current node.</span>
<span class="sd">        A leading comma is added automatically.  The extra keyword</span>
<span class="sd">        arguments may not include python keywords otherwise a syntax</span>
<span class="sd">        error could occour.  The extra keyword arguments should be given</span>
<span class="sd">        as python dict.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># if any of the given keyword arguments is a python keyword</span>
        <span class="c1"># we have to make sure that no invalid call is created.</span>
        <span class="n">kwarg_workaround</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">for</span> <span class="n">kwarg</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">((</span><span class="n">x</span><span class="o">.</span><span class="n">key</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">kwargs</span><span class="p">),</span> <span class="n">extra_kwargs</span> <span class="ow">or</span> <span class="p">()):</span>
            <span class="k">if</span> <span class="n">is_python_keyword</span><span class="p">(</span><span class="n">kwarg</span><span class="p">):</span>
                <span class="n">kwarg_workaround</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">break</span>

        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">kwarg_workaround</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">kwarg</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">kwarg</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">extra_kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">iteritems</span><span class="p">(</span><span class="n">extra_kwargs</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, </span><span class="si">%s</span><span class="s1">=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">dyn_args</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, *&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">dyn_args</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">kwarg_workaround</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">dyn_kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, **dict({&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, **{&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">kwarg</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">kwargs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">: &#39;</span> <span class="o">%</span> <span class="n">kwarg</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">kwarg</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">extra_kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">iteritems</span><span class="p">(</span><span class="n">extra_kwargs</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">: </span><span class="si">%s</span><span class="s1">, &#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">dyn_kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;}, **&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">dyn_kwargs</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;}&#39;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">dyn_kwargs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, **&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">dyn_kwargs</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.pull_locals"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.pull_locals.html#jinja2.environment.CodeGenerator.pull_locals">[docs]</a>    <span class="k">def</span> <span class="nf">pull_locals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pull all the references identifiers into the local scope.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">undeclared</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;l_</span><span class="si">%s</span><span class="s1"> = context.resolve(</span><span class="si">%r</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span></div>

<div class="viewcode-block" id="CodeGenerator.pull_dependencies"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.pull_dependencies.html#jinja2.environment.CodeGenerator.pull_dependencies">[docs]</a>    <span class="k">def</span> <span class="nf">pull_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodes</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pull all the dependencies.&quot;&quot;&quot;</span>
        <span class="n">visitor</span> <span class="o">=</span> <span class="n">DependencyFinderVisitor</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
            <span class="n">visitor</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">dependency</span> <span class="ow">in</span> <span class="s1">&#39;filters&#39;</span><span class="p">,</span> <span class="s1">&#39;tests&#39;</span><span class="p">:</span>
            <span class="n">mapping</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dependency</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">visitor</span><span class="p">,</span> <span class="n">dependency</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">mapping</span><span class="p">:</span>
                    <span class="n">mapping</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">temporary_identifier</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> = environment.</span><span class="si">%s</span><span class="s1">[</span><span class="si">%r</span><span class="s1">]&#39;</span> <span class="o">%</span>
                               <span class="p">(</span><span class="n">mapping</span><span class="p">[</span><span class="n">name</span><span class="p">],</span> <span class="n">dependency</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span></div>

<div class="viewcode-block" id="CodeGenerator.unoptimize_scope"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.unoptimize_scope.html#jinja2.environment.CodeGenerator.unoptimize_scope">[docs]</a>    <span class="k">def</span> <span class="nf">unoptimize_scope</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Disable Python optimizations for the frame.&quot;&quot;&quot;</span>
        <span class="c1"># XXX: this is not that nice but it has no real overhead.  It</span>
        <span class="c1"># mainly works because python finds the locals before dead code</span>
        <span class="c1"># is removed.  If that breaks we have to add a dummy function</span>
        <span class="c1"># that just accepts the arguments and does nothing.</span>
        <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">dummy(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">unoptimize_before_dead_code</span> <span class="ow">and</span> <span class="s1">&#39;if 0: &#39;</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;l_&#39;</span> <span class="o">+</span> <span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared</span><span class="p">)</span>
            <span class="p">))</span></div>

<div class="viewcode-block" id="CodeGenerator.push_scope"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.push_scope.html#jinja2.environment.CodeGenerator.push_scope">[docs]</a>    <span class="k">def</span> <span class="nf">push_scope</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">extra_vars</span><span class="o">=</span><span class="p">()):</span>
        <span class="sd">&quot;&quot;&quot;This function returns all the shadowed variables in a dict</span>
<span class="sd">        in the form name: alias and will write the required assignments</span>
<span class="sd">        into the current scope.  No indentation takes place.</span>

<span class="sd">        This also predefines locally declared variables from the loop</span>
<span class="sd">        body because under some circumstances it may be the case that</span>

<span class="sd">        `extra_vars` is passed to `Frame.find_shadowed`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">aliases</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">frame</span><span class="o">.</span><span class="n">find_shadowed</span><span class="p">(</span><span class="n">extra_vars</span><span class="p">):</span>
            <span class="n">aliases</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">ident</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">temporary_identifier</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> = l_</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ident</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="n">to_declare</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared_locally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">aliases</span><span class="p">:</span>
                <span class="n">to_declare</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;l_&#39;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">to_declare</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39; = &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">to_declare</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; = missing&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">aliases</span></div>

<div class="viewcode-block" id="CodeGenerator.pop_scope"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.pop_scope.html#jinja2.environment.CodeGenerator.pop_scope">[docs]</a>    <span class="k">def</span> <span class="nf">pop_scope</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aliases</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Restore all aliases and delete unused variables.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">alias</span> <span class="ow">in</span> <span class="n">iteritems</span><span class="p">(</span><span class="n">aliases</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;l_</span><span class="si">%s</span><span class="s1"> = </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">alias</span><span class="p">))</span>
        <span class="n">to_delete</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared_locally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">aliases</span><span class="p">:</span>
                <span class="n">to_delete</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;l_&#39;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">to_delete</span><span class="p">:</span>
            <span class="c1"># we cannot use the del statement here because enclosed</span>
            <span class="c1"># scopes can trigger a SyntaxError:</span>
            <span class="c1">#   a = 42; b = lambda: a; del a</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39; = &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">to_delete</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; = missing&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.function_scoping"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.function_scoping.html#jinja2.environment.CodeGenerator.function_scoping">[docs]</a>    <span class="k">def</span> <span class="nf">function_scoping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                         <span class="n">find_special</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;In Jinja a few statements require the help of anonymous</span>
<span class="sd">        functions.  Those are currently macros and call blocks and in</span>
<span class="sd">        the future also recursive loops.  As there is currently</span>
<span class="sd">        technical limitation that doesn&#39;t allow reading and writing a</span>
<span class="sd">        variable in a scope where the initial value is coming from an</span>
<span class="sd">        outer scope, this function tries to fall back with a common</span>
<span class="sd">        error message.  Additionally the frame passed is modified so</span>
<span class="sd">        that the argumetns are collected and callers are looked up.</span>

<span class="sd">        This will return the modified frame.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># we have to iterate twice over it, make sure that works</span>
        <span class="k">if</span> <span class="n">children</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">children</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">iter_child_nodes</span><span class="p">()</span>
        <span class="n">children</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">children</span><span class="p">)</span>
        <span class="n">func_frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">inner</span><span class="p">()</span>
        <span class="n">func_frame</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">children</span><span class="p">)</span>

        <span class="c1"># variables that are undeclared (accessed before declaration) and</span>
        <span class="c1"># declared locally *and* part of an outside scope raise a template</span>
        <span class="c1"># assertion error. Reason: we can&#39;t generate reasonable code from</span>
        <span class="c1"># it without aliasing all the variables.</span>
        <span class="c1"># this could be fixed in Python 3 where we have the nonlocal</span>
        <span class="c1"># keyword or if we switch to bytecode generation</span>
        <span class="n">overridden_closure_vars</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">func_frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">undeclared</span> <span class="o">&amp;</span>
            <span class="n">func_frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared</span> <span class="o">&amp;</span>
            <span class="p">(</span><span class="n">func_frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared_locally</span> <span class="o">|</span>
             <span class="n">func_frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared_parameter</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">overridden_closure_vars</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s1">&#39;It</span><span class="se">\&#39;</span><span class="s1">s not possible to set and access variables &#39;</span>
                      <span class="s1">&#39;derived from an outer scope! (affects: </span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span>
                      <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">overridden_closure_vars</span><span class="p">)),</span> <span class="n">node</span><span class="o">.</span><span class="n">lineno</span><span class="p">)</span>

        <span class="c1"># remove variables from a closure from the frame&#39;s undeclared</span>
        <span class="c1"># identifiers.</span>
        <span class="n">func_frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">undeclared</span> <span class="o">-=</span> <span class="p">(</span>
            <span class="n">func_frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">undeclared</span> <span class="o">&amp;</span>
            <span class="n">func_frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared</span>
        <span class="p">)</span>

        <span class="c1"># no special variables for this scope, abort early</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">find_special</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">func_frame</span>

        <span class="n">func_frame</span><span class="o">.</span><span class="n">accesses_kwargs</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">func_frame</span><span class="o">.</span><span class="n">accesses_varargs</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">func_frame</span><span class="o">.</span><span class="n">accesses_caller</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">func_frame</span><span class="o">.</span><span class="n">arguments</span> <span class="o">=</span> <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;l_&#39;</span> <span class="o">+</span> <span class="n">x</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">args</span><span class="p">]</span>

        <span class="n">undeclared</span> <span class="o">=</span> <span class="n">find_undeclared</span><span class="p">(</span><span class="n">children</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;caller&#39;</span><span class="p">,</span> <span class="s1">&#39;kwargs&#39;</span><span class="p">,</span> <span class="s1">&#39;varargs&#39;</span><span class="p">))</span>

        <span class="k">if</span> <span class="s1">&#39;caller&#39;</span> <span class="ow">in</span> <span class="n">undeclared</span><span class="p">:</span>
            <span class="n">func_frame</span><span class="o">.</span><span class="n">accesses_caller</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">func_frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">add_special</span><span class="p">(</span><span class="s1">&#39;caller&#39;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;l_caller&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;kwargs&#39;</span> <span class="ow">in</span> <span class="n">undeclared</span><span class="p">:</span>
            <span class="n">func_frame</span><span class="o">.</span><span class="n">accesses_kwargs</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">func_frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">add_special</span><span class="p">(</span><span class="s1">&#39;kwargs&#39;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;l_kwargs&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;varargs&#39;</span> <span class="ow">in</span> <span class="n">undeclared</span><span class="p">:</span>
            <span class="n">func_frame</span><span class="o">.</span><span class="n">accesses_varargs</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">func_frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">add_special</span><span class="p">(</span><span class="s1">&#39;varargs&#39;</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;l_varargs&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">func_frame</span></div>

<div class="viewcode-block" id="CodeGenerator.macro_body"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.macro_body.html#jinja2.environment.CodeGenerator.macro_body">[docs]</a>    <span class="k">def</span> <span class="nf">macro_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Dump the function def of a macro or call block.&quot;&quot;&quot;</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">function_scoping</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">children</span><span class="p">)</span>
        <span class="c1"># macros are delayed, they never require output checks</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">require_output_check</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">arguments</span>
        <span class="c1"># XXX: this is an ugly fix for the loop nesting bug</span>
        <span class="c1"># (tests.test_old_bugs.test_loop_call_bug).  This works around</span>
        <span class="c1"># a identifier nesting problem we have in general.  It&#39;s just more</span>
        <span class="c1"># likely to happen in loops which is why we work around it.  The</span>
        <span class="c1"># real solution would be &quot;nonlocal&quot; all the identifiers that are</span>
        <span class="c1"># leaking into a new python frame and might be used both unassigned</span>
        <span class="c1"># and assigned.</span>
        <span class="k">if</span> <span class="s1">&#39;loop&#39;</span> <span class="ow">in</span> <span class="n">frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">declared</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">args</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;l_loop=l_loop&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;def macro(</span><span class="si">%s</span><span class="s1">):&#39;</span> <span class="o">%</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">),</span> <span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pull_locals</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blockvisit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">return_buffer_contents</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">frame</span></div>

<div class="viewcode-block" id="CodeGenerator.macro_def"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.macro_def.html#jinja2.environment.CodeGenerator.macro_def">[docs]</a>    <span class="k">def</span> <span class="nf">macro_def</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Dump the macro definition for the def created by macro_body.&quot;&quot;&quot;</span>
        <span class="n">arg_tuple</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">arg_tuple</span> <span class="o">+=</span> <span class="s1">&#39;,&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Macro(environment, macro, </span><span class="si">%r</span><span class="s1">, (</span><span class="si">%s</span><span class="s1">), (&#39;</span> <span class="o">%</span>
                   <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">arg_tuple</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">defaults</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;), </span><span class="si">%r</span><span class="s1">, </span><span class="si">%r</span><span class="s1">, </span><span class="si">%r</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span>
            <span class="nb">bool</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">accesses_kwargs</span><span class="p">),</span>
            <span class="nb">bool</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">accesses_varargs</span><span class="p">),</span>
            <span class="nb">bool</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">accesses_caller</span><span class="p">)</span>
        <span class="p">))</span></div>

<div class="viewcode-block" id="CodeGenerator.position"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.position.html#jinja2.environment.CodeGenerator.position">[docs]</a>    <span class="k">def</span> <span class="nf">position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a human readable position for the node.&quot;&quot;&quot;</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="s1">&#39;line </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">lineno</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">rv</span> <span class="o">+=</span> <span class="s1">&#39; in &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rv</span></div>

    <span class="c1"># -- Statement Visitors</span>

<div class="viewcode-block" id="CodeGenerator.visit_Template"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Template.html#jinja2.environment.CodeGenerator.visit_Template">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">frame</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">,</span> <span class="s1">&#39;no root frame allowed&#39;</span>
        <span class="n">eval_ctx</span> <span class="o">=</span> <span class="n">EvalContext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="kn">from</span> <span class="nn">jinja2.runtime</span> <span class="kn">import</span> <span class="n">__all__</span> <span class="k">as</span> <span class="n">exported</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;from __future__ import division&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;from jinja2.runtime import &#39;</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">exported</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">unoptimize_before_dead_code</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;dummy = lambda *x: None&#39;</span><span class="p">)</span>

        <span class="c1"># if we want a deferred initialization we cannot move the</span>
        <span class="c1"># environment into a local name</span>
        <span class="n">envenv</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">defer_init</span> <span class="ow">and</span> <span class="s1">&#39;, environment=environment&#39;</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span>

        <span class="c1"># do we have an extends tag at all?  If not, we can save some</span>
        <span class="c1"># overhead by just not processing any inheritance code.</span>
        <span class="n">have_extends</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">Extends</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>

        <span class="c1"># find all blocks</span>
        <span class="k">for</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">Block</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">block</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s1">&#39;block </span><span class="si">%r</span><span class="s1"> defined twice&#39;</span> <span class="o">%</span> <span class="n">block</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">block</span><span class="o">.</span><span class="n">lineno</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span><span class="n">block</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">block</span>

        <span class="c1"># find all imports and import them</span>
        <span class="k">for</span> <span class="n">import_</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">ImportedName</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">import_</span><span class="o">.</span><span class="n">importname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">import_aliases</span><span class="p">:</span>
                <span class="n">imp</span> <span class="o">=</span> <span class="n">import_</span><span class="o">.</span><span class="n">importname</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">import_aliases</span><span class="p">[</span><span class="n">imp</span><span class="p">]</span> <span class="o">=</span> <span class="n">alias</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">temporary_identifier</span><span class="p">()</span>
                <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">in</span> <span class="n">imp</span><span class="p">:</span>
                    <span class="n">module</span><span class="p">,</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">imp</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;from </span><span class="si">%s</span><span class="s1"> import </span><span class="si">%s</span><span class="s1"> as </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span>
                                   <span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">alias</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;import </span><span class="si">%s</span><span class="s1"> as </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">imp</span><span class="p">,</span> <span class="n">alias</span><span class="p">))</span>

        <span class="c1"># add the load name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;name = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># generate the root render function.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;def root(context</span><span class="si">%s</span><span class="s1">):&#39;</span> <span class="o">%</span> <span class="n">envenv</span><span class="p">,</span> <span class="n">extra</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># process the root</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">eval_ctx</span><span class="p">)</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">toplevel</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">rootlevel</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">require_output_check</span> <span class="o">=</span> <span class="n">have_extends</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_known_extends</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">have_extends</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;parent_template = None&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;self&#39;</span> <span class="ow">in</span> <span class="n">find_undeclared</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;self&#39;</span><span class="p">,)):</span>
            <span class="n">frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">add_special</span><span class="p">(</span><span class="s1">&#39;self&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;l_self = TemplateReference(context)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pull_locals</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pull_dependencies</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blockvisit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span>

        <span class="c1"># make sure that the parent root is called.</span>
        <span class="k">if</span> <span class="n">have_extends</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_known_extends</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;if parent_template is not None:&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;for event in parent_template.&#39;</span>
                           <span class="s1">&#39;root_render_func(context):&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;yield event&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_known_extends</span><span class="p">))</span>

        <span class="c1"># at this point we now have the blocks collected and can visit them too.</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">block</span> <span class="ow">in</span> <span class="n">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">blocks</span><span class="p">):</span>
            <span class="n">block_frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">eval_ctx</span><span class="p">)</span>
            <span class="n">block_frame</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
            <span class="n">block_frame</span><span class="o">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;def block_</span><span class="si">%s</span><span class="s1">(context</span><span class="si">%s</span><span class="s1">):&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">envenv</span><span class="p">),</span>
                           <span class="n">block</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
            <span class="n">undeclared</span> <span class="o">=</span> <span class="n">find_undeclared</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;self&#39;</span><span class="p">,</span> <span class="s1">&#39;super&#39;</span><span class="p">))</span>
            <span class="k">if</span> <span class="s1">&#39;self&#39;</span> <span class="ow">in</span> <span class="n">undeclared</span><span class="p">:</span>
                <span class="n">block_frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">add_special</span><span class="p">(</span><span class="s1">&#39;self&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;l_self = TemplateReference(context)&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;super&#39;</span> <span class="ow">in</span> <span class="n">undeclared</span><span class="p">:</span>
                <span class="n">block_frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">add_special</span><span class="p">(</span><span class="s1">&#39;super&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;l_super = context.super(</span><span class="si">%r</span><span class="s1">, &#39;</span>
                               <span class="s1">&#39;block_</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pull_locals</span><span class="p">(</span><span class="n">block_frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pull_dependencies</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">blockvisit</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">block_frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;blocks = {</span><span class="si">%s</span><span class="s1">}&#39;</span> <span class="o">%</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">: block_</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
                                                   <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span><span class="p">),</span>
                       <span class="n">extra</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># add a function that returns the debug info</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;debug_info = </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="s1">&#39;&amp;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span>
                                                    <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug_info</span><span class="p">))</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Block"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Block.html#jinja2.environment.CodeGenerator.visit_Block">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call a block and register it for the template.&quot;&quot;&quot;</span>
        <span class="n">level</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">toplevel</span><span class="p">:</span>
            <span class="c1"># if we know that we are a child template, there is no need to</span>
            <span class="c1"># check if we are one</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_known_extends</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">extends_so_far</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;if parent_template is None:&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
                <span class="n">level</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">context</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">scoped</span> <span class="ow">and</span> <span class="s1">&#39;context.derived(locals())&#39;</span> <span class="ow">or</span> <span class="s1">&#39;context&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;for event in context.blocks[</span><span class="si">%r</span><span class="s1">][0](</span><span class="si">%s</span><span class="s1">):&#39;</span> <span class="o">%</span> <span class="p">(</span>
                       <span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">context</span><span class="p">),</span> <span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simple_write</span><span class="p">(</span><span class="s1">&#39;event&#39;</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">(</span><span class="n">level</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Extends"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Extends.html#jinja2.environment.CodeGenerator.visit_Extends">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Extends</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Calls the extender.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">frame</span><span class="o">.</span><span class="n">toplevel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s1">&#39;cannot use extend from a non top-level scope&#39;</span><span class="p">,</span>
                      <span class="n">node</span><span class="o">.</span><span class="n">lineno</span><span class="p">)</span>

        <span class="c1"># if the number of extends statements in general is zero so</span>
        <span class="c1"># far, we don&#39;t have to add a check if something extended</span>
        <span class="c1"># the template before this one.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">extends_so_far</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>

            <span class="c1"># if we have a known extends we just add a template runtime</span>
            <span class="c1"># error into the generated code.  We could catch that at compile</span>
            <span class="c1"># time too, but i welcome it not to confuse users by throwing the</span>
            <span class="c1"># same error at different times just &quot;because we can&quot;.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_known_extends</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;if parent_template is not None:&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;raise TemplateRuntimeError(</span><span class="si">%r</span><span class="s1">)&#39;</span> <span class="o">%</span>
                           <span class="s1">&#39;extended multiple times&#39;</span><span class="p">)</span>

            <span class="c1"># if we have a known extends already we don&#39;t need that code here</span>
            <span class="c1"># as we know that the template execution will end here.</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_known_extends</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">CompilerExit</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;parent_template = environment.get_template(&#39;</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">template</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, </span><span class="si">%r</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;for name, parent_block in parent_template.&#39;</span>
                       <span class="s1">&#39;blocks.</span><span class="si">%s</span><span class="s1">():&#39;</span> <span class="o">%</span> <span class="n">dict_item_iter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;context.blocks.setdefault(name, []).&#39;</span>
                       <span class="s1">&#39;append(parent_block)&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span>

        <span class="c1"># if this extends statement was in the root level we can take</span>
        <span class="c1"># advantage of that information and simplify the generated code</span>
        <span class="c1"># in the top level from this point onwards</span>
        <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">rootlevel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">has_known_extends</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="c1"># and now we have one more</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extends_so_far</span> <span class="o">+=</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Include"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Include.html#jinja2.environment.CodeGenerator.visit_Include">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Include</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Handles includes.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">with_context</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unoptimize_scope</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">ignore_missing</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;try:&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>

        <span class="n">func_name</span> <span class="o">=</span> <span class="s1">&#39;get_or_select_template&#39;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">template</span><span class="p">,</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Const</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">string_types</span><span class="p">):</span>
                <span class="n">func_name</span> <span class="o">=</span> <span class="s1">&#39;get_template&#39;</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">template</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
                <span class="n">func_name</span> <span class="o">=</span> <span class="s1">&#39;select_template&#39;</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">template</span><span class="p">,</span> <span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">Tuple</span><span class="p">,</span> <span class="n">nodes</span><span class="o">.</span><span class="n">List</span><span class="p">)):</span>
            <span class="n">func_name</span> <span class="o">=</span> <span class="s1">&#39;select_template&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;template = environment.</span><span class="si">%s</span><span class="s1">(&#39;</span> <span class="o">%</span> <span class="n">func_name</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">template</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, </span><span class="si">%r</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">ignore_missing</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;except TemplateNotFound:&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;else:&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">with_context</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;for event in template.root_render_func(&#39;</span>
                           <span class="s1">&#39;template.new_context(context.parent, True, &#39;</span>
                           <span class="s1">&#39;locals())):&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;for event in template.module._body_stream:&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simple_write</span><span class="p">(</span><span class="s1">&#39;event&#39;</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">ignore_missing</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Import"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Import.html#jinja2.environment.CodeGenerator.visit_Import">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Import</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Visit regular imports.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">with_context</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unoptimize_scope</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;l_</span><span class="si">%s</span><span class="s1"> = &#39;</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">toplevel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;context.vars[</span><span class="si">%r</span><span class="s1">] = &#39;</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">target</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;environment.get_template(&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">template</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, </span><span class="si">%r</span><span class="s1">).&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">with_context</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;make_module(context.parent, True, locals())&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;module&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">toplevel</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;context.exported_vars.discard(</span><span class="si">%r</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">target</span><span class="p">)</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">assigned_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">target</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_FromImport"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_FromImport.html#jinja2.environment.CodeGenerator.visit_FromImport">[docs]</a>    <span class="k">def</span> <span class="nf">visit_FromImport</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Visit named imports.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newline</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;included_template = environment.get_template(&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">template</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, </span><span class="si">%r</span><span class="s1">).&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">with_context</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;make_module(context.parent, True)&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;module&#39;</span><span class="p">)</span>

        <span class="n">var_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">discarded_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">names</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                <span class="n">name</span><span class="p">,</span> <span class="n">alias</span> <span class="o">=</span> <span class="n">name</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">alias</span> <span class="o">=</span> <span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;l_</span><span class="si">%s</span><span class="s1"> = getattr(included_template, &#39;</span>
                           <span class="s1">&#39;</span><span class="si">%r</span><span class="s1">, missing)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;if l_</span><span class="si">%s</span><span class="s1"> is missing:&#39;</span> <span class="o">%</span> <span class="n">alias</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;l_</span><span class="si">%s</span><span class="s1"> = environment.undefined(</span><span class="si">%r</span><span class="s1"> </span><span class="si">%%</span><span class="s1"> &#39;</span>
                           <span class="s1">&#39;included_template.__name__, &#39;</span>
                           <span class="s1">&#39;name=</span><span class="si">%r</span><span class="s1">)&#39;</span> <span class="o">%</span>
                           <span class="p">(</span><span class="n">alias</span><span class="p">,</span> <span class="s1">&#39;the template </span><span class="si">%%</span><span class="s1">r (imported on </span><span class="si">%s</span><span class="s1">) does &#39;</span>
                           <span class="s1">&#39;not export the requested name </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">(</span><span class="n">node</span><span class="p">),</span>
                                <span class="nb">repr</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                           <span class="p">),</span> <span class="n">name</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">toplevel</span><span class="p">:</span>
                <span class="n">var_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">alias</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">):</span>
                    <span class="n">discarded_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>
            <span class="n">frame</span><span class="o">.</span><span class="n">assigned_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">alias</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">var_names</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">var_names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">var_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;context.vars[</span><span class="si">%r</span><span class="s1">] = l_</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;context.vars.update({</span><span class="si">%s</span><span class="s1">})&#39;</span> <span class="o">%</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                    <span class="s1">&#39;</span><span class="si">%r</span><span class="s1">: l_</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">var_names</span>
                <span class="p">))</span>
        <span class="k">if</span> <span class="n">discarded_names</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">discarded_names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;context.exported_vars.discard(</span><span class="si">%r</span><span class="s1">)&#39;</span> <span class="o">%</span>
                               <span class="n">discarded_names</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;context.exported_vars.difference_&#39;</span>
                               <span class="s1">&#39;update((</span><span class="si">%s</span><span class="s1">))&#39;</span> <span class="o">%</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">imap</span><span class="p">(</span><span class="nb">repr</span><span class="p">,</span> <span class="n">discarded_names</span><span class="p">)))</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_For"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_For.html#jinja2.environment.CodeGenerator.visit_For">[docs]</a>    <span class="k">def</span> <span class="nf">visit_For</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="c1"># when calculating the nodes for the inner frame we have to exclude</span>
        <span class="c1"># the iterator contents from it</span>
        <span class="n">children</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">iter_child_nodes</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;iter&#39;</span><span class="p">,))</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">recursive</span><span class="p">:</span>
            <span class="n">loop_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">function_scoping</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">children</span><span class="p">,</span>
                                               <span class="n">find_special</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">loop_frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">inner</span><span class="p">()</span>
            <span class="n">loop_frame</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">children</span><span class="p">)</span>

        <span class="c1"># try to figure out if we have an extended loop.  An extended loop</span>
        <span class="c1"># is necessary if the loop is in recursive mode if the special loop</span>
        <span class="c1"># variable is accessed in the body.</span>
        <span class="n">extended_loop</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">recursive</span> <span class="ow">or</span> <span class="s1">&#39;loop&#39;</span> <span class="ow">in</span> \
                        <span class="n">find_undeclared</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">iter_child_nodes</span><span class="p">(</span>
                            <span class="n">only</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">,)),</span> <span class="p">(</span><span class="s1">&#39;loop&#39;</span><span class="p">,))</span>

        <span class="c1"># if we don&#39;t have an recursive loop we have to find the shadowed</span>
        <span class="c1"># variables at that point.  Because loops can be nested but the loop</span>
        <span class="c1"># variable is a special one we have to enforce aliasing for it.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">recursive</span><span class="p">:</span>
            <span class="n">aliases</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_scope</span><span class="p">(</span><span class="n">loop_frame</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;loop&#39;</span><span class="p">,))</span>

        <span class="c1"># otherwise we set up a buffer and add a function def</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;def loop(reciter, loop_render_func, depth=0):&#39;</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">loop_frame</span><span class="p">)</span>
            <span class="n">aliases</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># make sure the loop variable is a special one and raise a template</span>
        <span class="c1"># assertion error if a loop tries to write to loop</span>
        <span class="k">if</span> <span class="n">extended_loop</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;l_loop = missing&#39;</span><span class="p">)</span>
            <span class="n">loop_frame</span><span class="o">.</span><span class="n">identifiers</span><span class="o">.</span><span class="n">add_special</span><span class="p">(</span><span class="s1">&#39;loop&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">Name</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">ctx</span> <span class="o">==</span> <span class="s1">&#39;store&#39;</span> <span class="ow">and</span> <span class="n">name</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;loop&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s1">&#39;Can</span><span class="se">\&#39;</span><span class="s1">t assign to special loop variable &#39;</span>
                          <span class="s1">&#39;in for-loop target&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">.</span><span class="n">lineno</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pull_locals</span><span class="p">(</span><span class="n">loop_frame</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">else_</span><span class="p">:</span>
            <span class="n">iteration_indicator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">temporary_identifier</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> = 1&#39;</span> <span class="o">%</span> <span class="n">iteration_indicator</span><span class="p">)</span>

        <span class="c1"># Create a fake parent loop if the else or test section of a</span>
        <span class="c1"># loop is accessing the special loop variable and no parent loop</span>
        <span class="c1"># exists.</span>
        <span class="k">if</span> <span class="s1">&#39;loop&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">aliases</span> <span class="ow">and</span> <span class="s1">&#39;loop&#39;</span> <span class="ow">in</span> <span class="n">find_undeclared</span><span class="p">(</span>
           <span class="n">node</span><span class="o">.</span><span class="n">iter_child_nodes</span><span class="p">(</span><span class="n">only</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;else_&#39;</span><span class="p">,</span> <span class="s1">&#39;test&#39;</span><span class="p">)),</span> <span class="p">(</span><span class="s1">&#39;loop&#39;</span><span class="p">,)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s2">&quot;l_loop = environment.undefined(</span><span class="si">%r</span><span class="s2">, name=&#39;loop&#39;)&quot;</span> <span class="o">%</span>
                <span class="p">(</span><span class="s2">&quot;&#39;loop&#39; is undefined. the filter section of a loop as well &quot;</span>
                 <span class="s2">&quot;as the else block don&#39;t have access to the special &#39;loop&#39;&quot;</span>
                 <span class="s2">&quot; variable of the current loop.  Because there is no parent &quot;</span>
                 <span class="s2">&quot;loop it&#39;s undefined.  Happened in loop on </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span>
                 <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">(</span><span class="n">node</span><span class="p">)))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;for &#39;</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="n">loop_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">extended_loop</span> <span class="ow">and</span> <span class="s1">&#39;, l_loop in LoopContext(&#39;</span> <span class="ow">or</span> <span class="s1">&#39; in &#39;</span><span class="p">)</span>

        <span class="c1"># if we have an extened loop and a node test, we filter in the</span>
        <span class="c1"># &quot;outer frame&quot;.</span>
        <span class="k">if</span> <span class="n">extended_loop</span> <span class="ow">and</span> <span class="n">node</span><span class="o">.</span><span class="n">test</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="n">loop_frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; for &#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="n">loop_frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; in &#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">recursive</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;reciter&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">iter</span><span class="p">,</span> <span class="n">loop_frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; if (&#39;</span><span class="p">)</span>
            <span class="n">test_frame</span> <span class="o">=</span> <span class="n">loop_frame</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">test</span><span class="p">,</span> <span class="n">test_frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;))&#39;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">node</span><span class="o">.</span><span class="n">recursive</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;reciter&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">iter</span><span class="p">,</span> <span class="n">loop_frame</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">recursive</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, loop_render_func, depth):&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">extended_loop</span> <span class="ow">and</span> <span class="s1">&#39;):&#39;</span> <span class="ow">or</span> <span class="s1">&#39;:&#39;</span><span class="p">)</span>

        <span class="c1"># tests in not extended loops become a continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">extended_loop</span> <span class="ow">and</span> <span class="n">node</span><span class="o">.</span><span class="n">test</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;if not &#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">test</span><span class="p">,</span> <span class="n">loop_frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;continue&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blockvisit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">loop_frame</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">else_</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> = 0&#39;</span> <span class="o">%</span> <span class="n">iteration_indicator</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">else_</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;if </span><span class="si">%s</span><span class="s1">:&#39;</span> <span class="o">%</span> <span class="n">iteration_indicator</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">blockvisit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">else_</span><span class="p">,</span> <span class="n">loop_frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span>

        <span class="c1"># reset the aliases if there are any.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">recursive</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pop_scope</span><span class="p">(</span><span class="n">aliases</span><span class="p">,</span> <span class="n">loop_frame</span><span class="p">)</span>

        <span class="c1"># if the node was recursive we have to return the buffer contents</span>
        <span class="c1"># and start the iteration code</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">recursive</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">return_buffer_contents</span><span class="p">(</span><span class="n">loop_frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_write</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;loop(&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">iter</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, loop)&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">end_write</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_If"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_If.html#jinja2.environment.CodeGenerator.visit_If">[docs]</a>    <span class="k">def</span> <span class="nf">visit_If</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="n">if_frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">soft</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;if &#39;</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">test</span><span class="p">,</span> <span class="n">if_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blockvisit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">if_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">else_</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;else:&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">blockvisit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">else_</span><span class="p">,</span> <span class="n">if_frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Macro"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Macro.html#jinja2.environment.CodeGenerator.visit_Macro">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Macro</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="n">macro_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">macro_body</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newline</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">toplevel</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;context.exported_vars.add(</span><span class="si">%r</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;context.vars[</span><span class="si">%r</span><span class="s1">] = &#39;</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;l_</span><span class="si">%s</span><span class="s1"> = &#39;</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">macro_def</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">macro_frame</span><span class="p">)</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">assigned_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_CallBlock"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_CallBlock.html#jinja2.environment.CodeGenerator.visit_CallBlock">[docs]</a>    <span class="k">def</span> <span class="nf">visit_CallBlock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="n">children</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">iter_child_nodes</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;call&#39;</span><span class="p">,))</span>
        <span class="n">call_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">macro_body</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">children</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;caller = &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">macro_def</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">call_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_write</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit_Call</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">call</span><span class="p">,</span> <span class="n">call_frame</span><span class="p">,</span> <span class="n">forward_caller</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_write</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_FilterBlock"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_FilterBlock.html#jinja2.environment.CodeGenerator.visit_FilterBlock">[docs]</a>    <span class="k">def</span> <span class="nf">visit_FilterBlock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="n">filter_frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">inner</span><span class="p">()</span>
        <span class="n">filter_frame</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">iter_child_nodes</span><span class="p">())</span>
        <span class="n">aliases</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_scope</span><span class="p">(</span><span class="n">filter_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pull_locals</span><span class="p">(</span><span class="n">filter_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">filter_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blockvisit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">filter_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_write</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit_Filter</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">filter</span><span class="p">,</span> <span class="n">filter_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_write</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pop_scope</span><span class="p">(</span><span class="n">aliases</span><span class="p">,</span> <span class="n">filter_frame</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_ExprStmt"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_ExprStmt.html#jinja2.environment.CodeGenerator.visit_ExprStmt">[docs]</a>    <span class="k">def</span> <span class="nf">visit_ExprStmt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newline</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Output"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Output.html#jinja2.environment.CodeGenerator.visit_Output">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="c1"># if we have a known extends statement, we don&#39;t output anything</span>
        <span class="c1"># if we are in a require_output_check section</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_known_extends</span> <span class="ow">and</span> <span class="n">frame</span><span class="o">.</span><span class="n">require_output_check</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">allow_constant_finalize</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">finalize</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">finalize</span>
            <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s1">&#39;contextfunction&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="ow">or</span> \
               <span class="nb">getattr</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s1">&#39;evalcontextfunction&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                <span class="n">allow_constant_finalize</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="k">elif</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s1">&#39;environmentfunction&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                <span class="n">finalize</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">text_type</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">finalize</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">text_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">finalize</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">finalize</span> <span class="o">=</span> <span class="n">text_type</span>

        <span class="c1"># if we are inside a frame that requires output checking, we do so</span>
        <span class="n">outdent_later</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">require_output_check</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;if parent_template is None:&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
            <span class="n">outdent_later</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="c1"># try to evaluate as many chunks as possible into a static</span>
        <span class="c1"># string at compile time.</span>
        <span class="n">body</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">allow_constant_finalize</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Impossible</span><span class="p">()</span>
                <span class="n">const</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">as_const</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Impossible</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="c1"># the frame can&#39;t be volatile here, becaus otherwise the</span>
            <span class="c1"># as_const() function would raise an Impossible exception</span>
            <span class="c1"># at that point.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="o">.</span><span class="n">autoescape</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">const</span><span class="p">,</span> <span class="s1">&#39;__html__&#39;</span><span class="p">):</span>
                        <span class="n">const</span> <span class="o">=</span> <span class="n">const</span><span class="o">.</span><span class="n">__html__</span><span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">const</span> <span class="o">=</span> <span class="n">escape</span><span class="p">(</span><span class="n">const</span><span class="p">)</span>
                <span class="n">const</span> <span class="o">=</span> <span class="n">finalize</span><span class="p">(</span><span class="n">const</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="c1"># if something goes wrong here we evaluate the node</span>
                <span class="c1"># at runtime for easier debugging</span>
                <span class="n">body</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">body</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">body</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">body</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">const</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">body</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">const</span><span class="p">])</span>

        <span class="c1"># if we have less than 3 nodes or a buffer we yield or extend/append</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">body</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="ow">or</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c1"># for one item we append, for more we extend</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">body</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.append(&#39;</span> <span class="o">%</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.extend((&#39;</span> <span class="o">%</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">concat</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;yield &#39;</span> <span class="o">+</span> <span class="n">val</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="n">val</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;yield &#39;</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">newline</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                    <span class="n">close</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="o">.</span><span class="n">volatile</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(context.eval_ctx.autoescape and&#39;</span>
                                   <span class="s1">&#39; escape or to_string)(&#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="o">.</span><span class="n">autoescape</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;escape(&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;to_string(&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">finalize</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;environment.finalize(&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">finalize</span><span class="p">,</span>
                                   <span class="s2">&quot;contextfunction&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;context, &#39;</span><span class="p">)</span>
                        <span class="n">close</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;)&#39;</span> <span class="o">*</span> <span class="n">close</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c1"># close the open parentheses</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">body</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="s1">&#39;)&#39;</span> <span class="ow">or</span> <span class="s1">&#39;))&#39;</span><span class="p">)</span>

        <span class="c1"># otherwise we create a format string as this is faster in that case</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">format</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">arguments</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">body</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">format</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">concat</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;%&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%%</span><span class="s1">&#39;</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">format</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">)</span>
                    <span class="n">arguments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;yield &#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">concat</span><span class="p">(</span><span class="n">format</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39; % (&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">argument</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">newline</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
                <span class="n">close</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="o">.</span><span class="n">volatile</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(context.eval_ctx.autoescape and&#39;</span>
                               <span class="s1">&#39; escape or to_string)(&#39;</span><span class="p">)</span>
                    <span class="n">close</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">elif</span> <span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="o">.</span><span class="n">autoescape</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;escape(&#39;</span><span class="p">)</span>
                    <span class="n">close</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">finalize</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;environment.finalize(&#39;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">finalize</span><span class="p">,</span>
                               <span class="s1">&#39;contextfunction&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;context, &#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">finalize</span><span class="p">,</span>
                               <span class="s1">&#39;evalcontextfunction&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;context.eval_ctx, &#39;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">finalize</span><span class="p">,</span>
                               <span class="s1">&#39;environmentfunction&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;environment, &#39;</span><span class="p">)</span>
                    <span class="n">close</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;)&#39;</span> <span class="o">*</span> <span class="n">close</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">outdent_later</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outdent</span><span class="p">()</span></div>

<div class="viewcode-block" id="CodeGenerator.make_assignment_frame"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.make_assignment_frame.html#jinja2.environment.CodeGenerator.make_assignment_frame">[docs]</a>    <span class="k">def</span> <span class="nf">make_assignment_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="c1"># toplevel assignments however go into the local namespace and</span>
        <span class="c1"># the current template&#39;s context.  We create a copy of the frame</span>
        <span class="c1"># here and add a set so that the Name visitor can add the assigned</span>
        <span class="c1"># names here.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">frame</span><span class="o">.</span><span class="n">toplevel</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">frame</span>
        <span class="n">assignment_frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">assignment_frame</span><span class="o">.</span><span class="n">toplevel_assignments</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">assignment_frame</span></div>

<div class="viewcode-block" id="CodeGenerator.export_assigned_vars"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.export_assigned_vars.html#jinja2.environment.CodeGenerator.export_assigned_vars">[docs]</a>    <span class="k">def</span> <span class="nf">export_assigned_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">assignment_frame</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">frame</span><span class="o">.</span><span class="n">toplevel</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">public_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">assignment_frame</span><span class="o">.</span><span class="n">toplevel_assignments</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">assignment_frame</span><span class="o">.</span><span class="n">toplevel_assignments</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">assignment_frame</span><span class="o">.</span><span class="n">toplevel_assignments</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;context.vars[</span><span class="si">%r</span><span class="s1">] = l_</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;context.vars.update({&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">assignment_frame</span><span class="o">.</span><span class="n">toplevel_assignments</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">idx</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1">: l_</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;})&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">public_names</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">public_names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;context.exported_vars.add(</span><span class="si">%r</span><span class="s1">)&#39;</span> <span class="o">%</span>
                               <span class="n">public_names</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;context.exported_vars.update((</span><span class="si">%s</span><span class="s1">))&#39;</span> <span class="o">%</span>
                               <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">imap</span><span class="p">(</span><span class="nb">repr</span><span class="p">,</span> <span class="n">public_names</span><span class="p">)))</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Assign"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Assign.html#jinja2.environment.CodeGenerator.visit_Assign">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Assign</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newline</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="n">assignment_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_assignment_frame</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="n">assignment_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; = &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_assigned_vars</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">assignment_frame</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_AssignBlock"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_AssignBlock.html#jinja2.environment.CodeGenerator.visit_AssignBlock">[docs]</a>    <span class="k">def</span> <span class="nf">visit_AssignBlock</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="n">block_frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">inner</span><span class="p">()</span>
        <span class="n">block_frame</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
        <span class="n">aliases</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_scope</span><span class="p">(</span><span class="n">block_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pull_locals</span><span class="p">(</span><span class="n">block_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">block_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blockvisit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">block_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pop_scope</span><span class="p">(</span><span class="n">aliases</span><span class="p">,</span> <span class="n">block_frame</span><span class="p">)</span>

        <span class="n">assignment_frame</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_assignment_frame</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newline</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="n">assignment_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; = concat(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">block_frame</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_assigned_vars</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">assignment_frame</span><span class="p">)</span></div>

    <span class="c1"># -- Expression Visitors</span>

<div class="viewcode-block" id="CodeGenerator.visit_Name"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Name.html#jinja2.environment.CodeGenerator.visit_Name">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">ctx</span> <span class="o">==</span> <span class="s1">&#39;store&#39;</span> <span class="ow">and</span> <span class="n">frame</span><span class="o">.</span><span class="n">toplevel</span><span class="p">:</span>
            <span class="n">frame</span><span class="o">.</span><span class="n">toplevel_assignments</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;l_&#39;</span> <span class="o">+</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">assigned_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Const"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Const.html#jinja2.environment.CodeGenerator.visit_Const">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Const</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="n">val</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">value</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">val</span><span class="p">))</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_TemplateData"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_TemplateData.html#jinja2.environment.CodeGenerator.visit_TemplateData">[docs]</a>    <span class="k">def</span> <span class="nf">visit_TemplateData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">as_const</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="p">)))</span>
        <span class="k">except</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Impossible</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(context.eval_ctx.autoescape and Markup or identity)(</span><span class="si">%r</span><span class="s1">)&#39;</span>
                       <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Tuple"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Tuple.html#jinja2.environment.CodeGenerator.visit_Tuple">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Tuple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">)</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">items</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">idx</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">idx</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="s1">&#39;,)&#39;</span> <span class="ow">or</span> <span class="s1">&#39;)&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_List"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_List.html#jinja2.environment.CodeGenerator.visit_List">[docs]</a>    <span class="k">def</span> <span class="nf">visit_List</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">items</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">idx</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Dict"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Dict.html#jinja2.environment.CodeGenerator.visit_Dict">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;{&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">items</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">idx</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;: &#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;}&#39;</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">binop</span><span class="p">(</span><span class="n">operator</span><span class="p">,</span> <span class="n">interceptable</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">visitor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">sandboxed</span> <span class="ow">and</span> \
               <span class="n">operator</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">intercepted_binops</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;environment.call_binop(context, </span><span class="si">%r</span><span class="s1">, &#39;</span> <span class="o">%</span> <span class="n">operator</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">left</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">right</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">left</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%s</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="n">operator</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">right</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">visitor</span>

    <span class="k">def</span> <span class="nf">uaop</span><span class="p">(</span><span class="n">operator</span><span class="p">,</span> <span class="n">interceptable</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">visitor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">sandboxed</span> <span class="ow">and</span> \
               <span class="n">operator</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">intercepted_unops</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;environment.call_unop(context, </span><span class="si">%r</span><span class="s1">, &#39;</span> <span class="o">%</span> <span class="n">operator</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="n">operator</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">visitor</span>

    <span class="n">visit_Add</span> <span class="o">=</span> <span class="n">binop</span><span class="p">(</span><span class="s1">&#39;+&#39;</span><span class="p">)</span>
    <span class="n">visit_Sub</span> <span class="o">=</span> <span class="n">binop</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
    <span class="n">visit_Mul</span> <span class="o">=</span> <span class="n">binop</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">)</span>
    <span class="n">visit_Div</span> <span class="o">=</span> <span class="n">binop</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
    <span class="n">visit_FloorDiv</span> <span class="o">=</span> <span class="n">binop</span><span class="p">(</span><span class="s1">&#39;//&#39;</span><span class="p">)</span>
    <span class="n">visit_Pow</span> <span class="o">=</span> <span class="n">binop</span><span class="p">(</span><span class="s1">&#39;**&#39;</span><span class="p">)</span>
    <span class="n">visit_Mod</span> <span class="o">=</span> <span class="n">binop</span><span class="p">(</span><span class="s1">&#39;%&#39;</span><span class="p">)</span>
    <span class="n">visit_And</span> <span class="o">=</span> <span class="n">binop</span><span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">,</span> <span class="n">interceptable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">visit_Or</span> <span class="o">=</span> <span class="n">binop</span><span class="p">(</span><span class="s1">&#39;or&#39;</span><span class="p">,</span> <span class="n">interceptable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">visit_Pos</span> <span class="o">=</span> <span class="n">uaop</span><span class="p">(</span><span class="s1">&#39;+&#39;</span><span class="p">)</span>
    <span class="n">visit_Neg</span> <span class="o">=</span> <span class="n">uaop</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
    <span class="n">visit_Not</span> <span class="o">=</span> <span class="n">uaop</span><span class="p">(</span><span class="s1">&#39;not &#39;</span><span class="p">,</span> <span class="n">interceptable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">del</span> <span class="n">binop</span><span class="p">,</span> <span class="n">uaop</span>

<div class="viewcode-block" id="CodeGenerator.visit_Concat"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Concat.html#jinja2.environment.CodeGenerator.visit_Concat">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Concat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="o">.</span><span class="n">volatile</span><span class="p">:</span>
            <span class="n">func_name</span> <span class="o">=</span> <span class="s1">&#39;(context.eval_ctx.volatile and&#39;</span> \
                        <span class="s1">&#39; markup_join or unicode_join)&#39;</span>
        <span class="k">elif</span> <span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="o">.</span><span class="n">autoescape</span><span class="p">:</span>
            <span class="n">func_name</span> <span class="o">=</span> <span class="s1">&#39;markup_join&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">func_name</span> <span class="o">=</span> <span class="s1">&#39;unicode_join&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">((&#39;</span> <span class="o">%</span> <span class="n">func_name</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;))&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Compare"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Compare.html#jinja2.environment.CodeGenerator.visit_Compare">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Compare</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">expr</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">ops</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Operand"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Operand.html#jinja2.environment.CodeGenerator.visit_Operand">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Operand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; </span><span class="si">%s</span><span class="s1"> &#39;</span> <span class="o">%</span> <span class="n">operators</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">op</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">expr</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Getattr"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Getattr.html#jinja2.environment.CodeGenerator.visit_Getattr">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;environment.getattr(&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, </span><span class="si">%r</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">attr</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Getitem"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Getitem.html#jinja2.environment.CodeGenerator.visit_Getitem">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Getitem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="c1"># slices bypass the environment getitem method.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">arg</span><span class="p">,</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Slice</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">arg</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;environment.getitem(&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">arg</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Slice"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Slice.html#jinja2.environment.CodeGenerator.visit_Slice">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Slice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">start</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">stop</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">step</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Filter"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Filter.html#jinja2.environment.CodeGenerator.visit_Filter">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span><span class="p">)</span>
        <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">func</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s1">&#39;no filter named </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">lineno</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s1">&#39;contextfilter&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;context, &#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s1">&#39;evalcontextfilter&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;context.eval_ctx, &#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="s1">&#39;environmentfilter&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;environment, &#39;</span><span class="p">)</span>

        <span class="c1"># if the filter node is None we are inside a filter block</span>
        <span class="c1"># and want to write to the current buffer</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">node</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="o">.</span><span class="n">volatile</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(context.eval_ctx.autoescape and&#39;</span>
                       <span class="s1">&#39; Markup(concat(</span><span class="si">%s</span><span class="s1">)) or concat(</span><span class="si">%s</span><span class="s1">))&#39;</span> <span class="o">%</span>
                       <span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="o">.</span><span class="n">autoescape</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Markup(concat(</span><span class="si">%s</span><span class="s1">))&#39;</span> <span class="o">%</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;concat(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">frame</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Test"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Test.html#jinja2.environment.CodeGenerator.visit_Test">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tests</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">tests</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s1">&#39;no test named </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">lineno</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_CondExpr"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_CondExpr.html#jinja2.environment.CodeGenerator.visit_CondExpr">[docs]</a>    <span class="k">def</span> <span class="nf">visit_CondExpr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">write_expr2</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">expr2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">expr2</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;environment.undefined(</span><span class="si">%r</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;the inline if-&#39;</span>
                       <span class="s1">&#39;expression on </span><span class="si">%s</span><span class="s1"> evaluated to false and &#39;</span>
                       <span class="s1">&#39;no else section was defined.&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">(</span><span class="n">node</span><span class="p">)))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">expr1</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; if &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">test</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; else &#39;</span><span class="p">)</span>
        <span class="n">write_expr2</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Call"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Call.html#jinja2.environment.CodeGenerator.visit_Call">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">forward_caller</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">sandboxed</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;environment.call(context, &#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;context.call(&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="n">extra_kwargs</span> <span class="o">=</span> <span class="n">forward_caller</span> <span class="ow">and</span> <span class="p">{</span><span class="s1">&#39;caller&#39;</span><span class="p">:</span> <span class="s1">&#39;caller&#39;</span><span class="p">}</span> <span class="ow">or</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">extra_kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Keyword"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Keyword.html#jinja2.environment.CodeGenerator.visit_Keyword">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Keyword</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">key</span> <span class="o">+</span> <span class="s1">&#39;=&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span></div>

    <span class="c1"># -- Unused nodes for extensions</span>

<div class="viewcode-block" id="CodeGenerator.visit_MarkSafe"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_MarkSafe.html#jinja2.environment.CodeGenerator.visit_MarkSafe">[docs]</a>    <span class="k">def</span> <span class="nf">visit_MarkSafe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Markup(&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">expr</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_MarkSafeIfAutoescape"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_MarkSafeIfAutoescape.html#jinja2.environment.CodeGenerator.visit_MarkSafeIfAutoescape">[docs]</a>    <span class="k">def</span> <span class="nf">visit_MarkSafeIfAutoescape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;(context.eval_ctx.autoescape and Markup or identity)(&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">expr</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_EnvironmentAttribute"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_EnvironmentAttribute.html#jinja2.environment.CodeGenerator.visit_EnvironmentAttribute">[docs]</a>    <span class="k">def</span> <span class="nf">visit_EnvironmentAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;environment.&#39;</span> <span class="o">+</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_ExtensionAttribute"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_ExtensionAttribute.html#jinja2.environment.CodeGenerator.visit_ExtensionAttribute">[docs]</a>    <span class="k">def</span> <span class="nf">visit_ExtensionAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;environment.extensions[</span><span class="si">%r</span><span class="s1">].</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">))</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_ImportedName"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_ImportedName.html#jinja2.environment.CodeGenerator.visit_ImportedName">[docs]</a>    <span class="k">def</span> <span class="nf">visit_ImportedName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">import_aliases</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">importname</span><span class="p">])</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_InternalName"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_InternalName.html#jinja2.environment.CodeGenerator.visit_InternalName">[docs]</a>    <span class="k">def</span> <span class="nf">visit_InternalName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_ContextReference"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_ContextReference.html#jinja2.environment.CodeGenerator.visit_ContextReference">[docs]</a>    <span class="k">def</span> <span class="nf">visit_ContextReference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;context&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Continue"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Continue.html#jinja2.environment.CodeGenerator.visit_Continue">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Continue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;continue&#39;</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Break"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Break.html#jinja2.environment.CodeGenerator.visit_Break">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Break</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;break&#39;</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_Scope"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_Scope.html#jinja2.environment.CodeGenerator.visit_Scope">[docs]</a>    <span class="k">def</span> <span class="nf">visit_Scope</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="n">scope_frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">inner</span><span class="p">()</span>
        <span class="n">scope_frame</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">iter_child_nodes</span><span class="p">())</span>
        <span class="n">aliases</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">push_scope</span><span class="p">(</span><span class="n">scope_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pull_locals</span><span class="p">(</span><span class="n">scope_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blockvisit</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">scope_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pop_scope</span><span class="p">(</span><span class="n">aliases</span><span class="p">,</span> <span class="n">scope_frame</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_EvalContextModifier"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_EvalContextModifier.html#jinja2.environment.CodeGenerator.visit_EvalContextModifier">[docs]</a>    <span class="k">def</span> <span class="nf">visit_EvalContextModifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">keyword</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;context.eval_ctx.</span><span class="si">%s</span><span class="s1"> = &#39;</span> <span class="o">%</span> <span class="n">keyword</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">keyword</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">keyword</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">as_const</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">nodes</span><span class="o">.</span><span class="n">Impossible</span><span class="p">:</span>
                <span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="o">.</span><span class="n">volatile</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="p">,</span> <span class="n">keyword</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span></div>

<div class="viewcode-block" id="CodeGenerator.visit_ScopedEvalContextModifier"><a class="viewcode-back" href="../../generated/generated/jinja2.environment.CodeGenerator.visit_ScopedEvalContextModifier.html#jinja2.environment.CodeGenerator.visit_ScopedEvalContextModifier">[docs]</a>    <span class="k">def</span> <span class="nf">visit_ScopedEvalContextModifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="n">old_ctx_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">temporary_identifier</span><span class="p">()</span>
        <span class="n">safed_ctx</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> = context.eval_ctx.save()&#39;</span> <span class="o">%</span> <span class="n">old_ctx_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">visit_EvalContextModifier</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">body</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">frame</span><span class="p">)</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">eval_ctx</span><span class="o">.</span><span class="n">revert</span><span class="p">(</span><span class="n">safed_ctx</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeline</span><span class="p">(</span><span class="s1">&#39;context.eval_ctx.revert(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">old_ctx_name</span><span class="p">)</span></div></div>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/copybutton.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>